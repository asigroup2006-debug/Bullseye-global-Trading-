<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="theme-color" content="#0a0a0a">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icons/icon-192.png">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Bulls Eye">
<meta name="description" content="Bulls Eye â€” India's Most Advanced Global Trading Intelligence App">
<link rel="manifest" href="manifest.json">
<title>Bulls Eye â€” Global Trading Intelligence</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;800;900&family=Rajdhani:wght@400;500;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• 6 THEMES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
[data-theme="galaxy"]{--bg:#0b0b0b;--s1:#111111;--s2:#171717;--b1:#202020;--b2:#2a2a2a;--a1:#ffffff;--a2:#ffffff;--a3:#25c866;--gr:#25c866;--rd:#e74c3c;--t1:#ffffff;--t2:#888888;--t3:#444444;--card:#161616;--cb:#252525;--top:#0b0b0b;--bnv:#0b0b0b;--hg:none;}
[data-theme="purple"]{--bg:#0d0118;--s1:#130224;--s2:#1a0430;--b1:#3d1260;--b2:#4e1878;--a1:#c084fc;--a2:#a855f7;--a3:#f472b6;--gr:#4ade80;--rd:#f87171;--t1:#f3e8ff;--t2:#c084fc;--t3:#7c3aed;--card:rgba(26,4,48,.9);--cb:rgba(61,18,96,.9);--top:rgba(13,1,24,.95);--bnv:rgba(13,1,24,.99);--hg:linear-gradient(135deg,rgba(168,85,247,.1),rgba(244,114,182,.06));}
[data-theme="ocean"]{--bg:#000d1a;--s1:#001428;--s2:#001e38;--b1:#004080;--b2:#005099;--a1:#00d4ff;--a2:#0090ff;--a3:#00ff88;--gr:#00ff88;--rd:#ff4466;--t1:#e0f4ff;--t2:#60b8e0;--t3:#1a5a80;--card:rgba(0,20,40,.9);--cb:rgba(0,64,128,.8);--top:rgba(0,13,26,.95);--bnv:rgba(0,13,26,.99);--hg:linear-gradient(135deg,rgba(0,212,255,.08),rgba(0,144,255,.05));}
[data-theme="matrix"]{--bg:#000800;--s1:#001000;--s2:#001800;--b1:#003800;--b2:#004800;--a1:#00ff41;--a2:#39ff14;--a3:#ccff00;--gr:#00ff41;--rd:#ff0040;--t1:#ccffcc;--t2:#44cc44;--t3:#1a6620;--card:rgba(0,16,0,.92);--cb:rgba(0,56,0,.9);--top:rgba(0,8,0,.97);--bnv:rgba(0,8,0,.99);--hg:linear-gradient(135deg,rgba(0,255,65,.07),rgba(57,255,20,.04));}
[data-theme="sunrise"]{--bg:#0f0800;--s1:#1a0e00;--s2:#241500;--b1:#5a3800;--b2:#704800;--a1:#ffb300;--a2:#ff6b00;--a3:#ff3300;--gr:#a8ff00;--rd:#ff1a1a;--t1:#fff8e8;--t2:#ffcc66;--t3:#8a5a00;--card:rgba(26,14,0,.9);--cb:rgba(90,56,0,.85);--top:rgba(15,8,0,.95);--bnv:rgba(15,8,0,.99);--hg:linear-gradient(135deg,rgba(255,179,0,.1),rgba(255,107,0,.06));}
[data-theme="midnight"]{--bg:#080808;--s1:#101010;--s2:#181818;--b1:#303030;--b2:#404040;--a1:#ffffff;--a2:#e0e0e0;--a3:#b0b0b0;--gr:#00c853;--rd:#ff1744;--t1:#f5f5f5;--t2:#aaaaaa;--t3:#555555;--card:rgba(16,16,16,.95);--cb:rgba(48,48,48,.9);--top:rgba(8,8,8,.98);--bnv:rgba(8,8,8,.99);--hg:linear-gradient(135deg,rgba(255,255,255,.05),rgba(224,224,224,.03));}

*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
html,body{height:100%;overflow:hidden;}
body{background:#0c0c0c;color:#ffffff;font-family:'Rajdhani',sans-serif;font-size:14px;}
::-webkit-scrollbar{width:2px;height:2px;}
::-webkit-scrollbar-thumb{background:var(--b2);border-radius:2px;}

/* GALAXY */
#gc{display:none;}
.nebula{display:none;}

/* APP */
.app{position:relative;z-index:1;height:100vh;display:flex;flex-direction:column;max-width:430px;margin:0 auto;}
.scr{display:none;flex:1;flex-direction:column;overflow:hidden;}
.scr.on{display:flex;}
.cnt{flex:1;overflow-y:auto;overflow-x:hidden;padding-bottom:68px;}
.scr-hdr{font-size:26px;font-weight:700;color:#fff;padding:16px 16px 8px;font-family:'Rajdhani',sans-serif;letter-spacing:-0.3px;}
.cnt::-webkit-scrollbar{width:0;}

/* TOPBAR */
.tb{display:flex;align-items:center;justify-content:space-between;padding:14px 16px 12px;flex-shrink:0;
  background:#0c0c0c;border-bottom:1px solid #1a1a1a;position:relative;}
.tb::after{content:'';}
.logo{display:flex;align-items:center;gap:8px;cursor:pointer;}
.logo-svg{width:38px;height:38px;flex-shrink:0;}
.logo-nm{font-family:'Orbitron',sans-serif;font-size:15px;font-weight:900;letter-spacing:2px;color:#ffffff;-webkit-text-fill-color:#ffffff;}
.logo-sub{font-size:7px;font-family:'Share Tech Mono',monospace;color:var(--a2);letter-spacing:1.5px;margin-top:-2px;}
.tbr{display:flex;align-items:center;gap:5px;}
.tbb{width:34px;height:34px;border-radius:8px;border:1px solid #222;
  background:#161616;color:#888;cursor:pointer;display:flex;align-items:center;
  justify-content:center;font-size:15px;transition:.2s;position:relative;}
.tbb:hover,.tbb.on{border-color:#444;color:#fff;}
.tbb.von{border-color:var(--a1);color:var(--a1);animation:vgl 1.5s infinite;}
@keyframes vgl{0%,100%{box-shadow:0 0 0 0 rgba(255,215,0,.4);}50%{box-shadow:0 0 0 8px transparent;}}
.ndot{position:absolute;top:5px;right:5px;width:5px;height:5px;background:var(--a3);border-radius:50%;border:1px solid var(--bg);animation:blink 2s infinite;}
@keyframes blink{0%,100%{opacity:1;}50%{opacity:.3;}}
.ava{width:34px;height:34px;border-radius:50%;background:#222222;display:flex;align-items:center;justify-content:center;font-family:'Rajdhani',sans-serif;font-size:12px;font-weight:700;color:#ffffff;cursor:pointer;border:1px solid #333;}

/* STRIP */
.mst-wrap{height:32px;background:#0c0c0c;border-bottom:1px solid #1a1a1a;overflow:hidden;display:flex;align-items:center;flex-shrink:0;}
.mst{display:flex;animation:mroll 50s linear infinite;width:max-content;}
.mst:hover{animation-play-state:paused;}
@keyframes mroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}
.msi{display:flex;align-items:center;gap:5px;padding:0 14px;border-right:1px solid rgba(255,255,255,.05);white-space:nowrap;}
.ms-s{font-family:'Rajdhani',sans-serif;font-size:11px;color:#555555;}
.ms-p{font-family:'Share Tech Mono',monospace;font-size:12px;font-weight:600;}
.ms-c{font-family:'Share Tech Mono',monospace;font-size:11px;}
.up{color:var(--gr)!important;}.dn{color:var(--rd)!important;}

/* BNAV */
.bnav{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:430px;z-index:100;
  height:64px;display:flex;align-items:center;justify-content:space-around;padding:0 8px;
  background:#0b0b0b;border-top:1px solid #1a1a1a;}
.bnav::before{content:'';}
.bn{display:flex;flex-direction:column;align-items:center;gap:3px;cursor:pointer;padding:6px 10px;border-radius:10px;transition:.2s;min-width:52px;}
.bn.act{background:transparent;}
.bni{font-size:20px;line-height:1;}
.bnl{font-size:10px;font-weight:600;color:var(--t3);letter-spacing:0;font-family:'Rajdhani',sans-serif;transition:.2s;}
.bn.act .bnl{color:#ffffff;} .bn.act .bni{opacity:1;} .bn .bni{opacity:0.5;} .bn .bnl{color:#555;}
.bn.act .bni{filter:none;}
.bn-trade{width:50px;height:50px;border-radius:50%;background:#ffffff;
  display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;color:#000;font-weight:700;
  margin-top:-14px;transition:.2s;box-shadow:0 4px 16px rgba(0,0,0,.5);}
.bn-trade:active{transform:scale(.95);}

/* CARD */
.card{background:#161616;border:1px solid #1e1e1e;border-radius:14px;}
.sech{display:flex;align-items:center;justify-content:space-between;padding:16px 16px 8px;}
.sect{font-family:'Rajdhani',sans-serif;font-size:15px;font-weight:700;letter-spacing:.3px;color:#ffffff;-webkit-text-fill-color:#ffffff;}
.secm{font-size:13px;color:#888888;cursor:pointer;font-family:'Rajdhani',sans-serif;}

/* HERO */
.hero{margin:0 0 0;padding:20px 16px;background:#0c0c0c;border:none;border-bottom:1px solid #1a1a1a;position:relative;}
.hero::before{display:none;}
@keyframes horb{}
.hero-gr{font-size:14px;font-family:'Rajdhani',sans-serif;color:#888888;margin-bottom:4px;}
.hero-val{font-family:'Rajdhani',sans-serif;font-size:36px;font-weight:700;color:#ffffff;-webkit-text-fill-color:#ffffff;margin:2px 0 4px;letter-spacing:-1px;line-height:1.1;}
.hero-st{display:grid;grid-template-columns:1fr 1fr 1fr;gap:6px;margin-top:12px;}
.hs{background:#141414;border-radius:10px;padding:10px 8px;border:1px solid #1e1e1e;}
.hsl{font-size:11px;font-family:'Rajdhani',sans-serif;color:#666666;margin-bottom:3px;text-transform:uppercase;letter-spacing:.3px;}
.hsv{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:700;color:#ffffff;-webkit-text-fill-color:#ffffff;}

/* QUICK ACTIONS */
.qag{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;padding:12px 16px;}
.qa{background:#141414;border:1px solid #1e1e1e;border-radius:14px;padding:14px 5px;text-align:center;cursor:pointer;transition:.2s;}
.qa:hover{border-color:var(--a2);transform:translateY(-2px);}
.qai{font-size:24px;margin-bottom:6px;}
.qal{font-size:12px;font-weight:600;color:#888888;font-family:'Rajdhani',sans-serif;}

/* HSCROLL */
.hscr{display:flex;gap:8px;padding:0 16px 4px;overflow-x:auto;}
.hscr::-webkit-scrollbar{height:0;}
.sc{flex:0 0 148px;background:var(--card);border:1px solid var(--cb);border-radius:14px;padding:12px;cursor:pointer;transition:.25s;overflow:hidden;}
.sc:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.5);}
.sc-sym{font-family:'Orbitron',sans-serif;font-size:13px;font-weight:700;}
.sc-nm{font-size:10px;color:var(--t3);margin:2px 0 6px;}
.sc-pr{font-family:'Rajdhani',sans-serif;font-size:17px;font-weight:700;margin-top:8px;color:#ffffff;-webkit-text-fill-color:#ffffff;}
.sc-pct{font-family:'Share Tech Mono',monospace;font-size:11px;margin-top:2px;}
.sc-sig{display:inline-block;margin-top:5px;padding:2px 7px;border-radius:3px;font-size:7px;font-weight:700;font-family:'Share Tech Mono',monospace;}
.sib{background:rgba(0,230,118,.15);color:#00e676;}
.sis{background:rgba(255,45,85,.15);color:#ff2d55;}
.sih{background:rgba(255,215,0,.15);color:#ffd700;}

/* GLOBAL MARKETS */
.gmg{display:grid;grid-template-columns:1fr 1fr;gap:8px;padding:0 16px;}
.gmc{background:#161616;border:1px solid #1e1e1e;border-radius:12px;padding:10px;cursor:pointer;transition:.2s;}
.gmc:hover{border-color:var(--a2);transform:translateY(-1px);}
.gfl{font-size:14px;margin-bottom:3px;}
.grg{font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);}
.gsm{font-size:12px;font-weight:700;font-family:'Orbitron',sans-serif;margin:2px 0;}
.gpr{font-family:'Share Tech Mono',monospace;font-size:14px;font-weight:700;}
.gch{font-family:'Share Tech Mono',monospace;font-size:11px;margin-top:1px;}

/* WATCHLIST */
.wlr{display:flex;align-items:center;gap:12px;padding:16px 16px;border-bottom:1px solid #181818;cursor:pointer;transition:.15s;}
.wlr:hover{background:rgba(255,255,255,.02);}
.wi{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;font-family:'Share Tech Mono',monospace;flex-shrink:0;}
.winfo{flex:1;min-width:0;}
.wsym{font-size:17px;font-weight:700;font-family:'Rajdhani',sans-serif;color:#ffffff;}
.wsub{font-size:12px;color:var(--t3);margin-top:2px;font-family:'Rajdhani',sans-serif;}
.wrt{text-align:right;flex-shrink:0;}
.wpr{font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:700;color:#ffffff;}
.wch{font-family:'Rajdhani',sans-serif;font-size:13px;margin-top:2px;font-weight:600;}

/* DETAIL */
.dhdr{padding:10px 14px;background:var(--top);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.06);flex-shrink:0;}
.dnav{display:flex;align-items:center;gap:8px;margin-bottom:8px;}
.bk{width:28px;height:28px;border-radius:7px;border:1px solid var(--b1);background:var(--card);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:13px;color:var(--a2);}
.dsym{font-family:'Orbitron',sans-serif;font-size:18px;font-weight:800;}
.dex{font-size:8px;background:rgba(0,245,255,.1);color:var(--a2);padding:2px 6px;border-radius:4px;font-family:'Share Tech Mono',monospace;}
.dpr{font-family:'Rajdhani',sans-serif;font-size:32px;font-weight:700;color:#ffffff;-webkit-text-fill-color:#ffffff;}
.dch{font-family:'Share Tech Mono',monospace;font-size:11px;margin-top:2px;}
.dst{display:flex;gap:10px;margin-top:8px;flex-wrap:wrap;}
.dsl{font-size:7px;font-family:'Share Tech Mono',monospace;color:var(--t3);}
.dsv{font-family:'Share Tech Mono',monospace;font-size:10px;font-weight:700;margin-top:1px;}
.dbtns{display:flex;gap:8px;margin-top:10px;}
.buybtn{flex:1;padding:11px;border:none;border-radius:10px;background:linear-gradient(135deg,#00e676,#00a860);color:#000;font-family:'Orbitron',sans-serif;font-size:13px;font-weight:800;cursor:pointer;box-shadow:0 0 20px rgba(0,230,118,.3);transition:.2s;}
.sllbtn{flex:1;padding:11px;border:none;border-radius:10px;background:linear-gradient(135deg,#ff2d55,#c0392b);color:#fff;font-family:'Orbitron',sans-serif;font-size:13px;font-weight:800;cursor:pointer;box-shadow:0 0 20px rgba(255,45,85,.3);transition:.2s;}
.buybtn:hover,.sllbtn:hover{transform:translateY(-1px);filter:brightness(1.1);}
.ctf{display:flex;gap:3px;padding:6px 14px;background:var(--top);border-bottom:1px solid rgba(255,255,255,.06);flex-shrink:0;}
.tf{padding:4px 10px;border-radius:5px;border:none;background:transparent;font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--t3);cursor:pointer;transition:.15s;}
.tf.a{background:linear-gradient(135deg,var(--a2),rgba(0,200,212,1));color:#000;font-weight:700;}
.cwrap{background:var(--s2);border-bottom:1px solid rgba(255,255,255,.06);flex-shrink:0;}

/* AI */
.aic{margin:12px 16px;padding:14px;border-radius:16px;background:var(--hg);border:1px solid rgba(255,255,255,.08);}
.ail{font-size:7px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:1.5px;margin-bottom:6px;}
.aibg{display:inline-flex;align-items:center;gap:5px;padding:6px 14px;border-radius:20px;font-family:'Orbitron',sans-serif;font-size:12px;font-weight:700;letter-spacing:1px;margin-bottom:12px;}
.sgb{background:rgba(0,230,118,.15);color:#00e676;border:1px solid rgba(0,230,118,.3);}
.sgs{background:rgba(255,45,85,.15);color:#ff2d55;border:1px solid rgba(255,45,85,.3);}
.sgh{background:rgba(255,215,0,.15);color:#ffd700;border:1px solid rgba(255,215,0,.3);}
.aitg{display:grid;grid-template-columns:1fr 1fr 1fr;gap:7px;margin-bottom:12px;}
.ait{background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.07);border-radius:8px;padding:9px;text-align:center;}
.atl{font-size:7px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:.5px;margin-bottom:3px;}
.atv{font-family:'Share Tech Mono',monospace;font-size:13px;font-weight:700;}
.confr{display:flex;align-items:center;gap:6px;margin-bottom:10px;}
.cbar{flex:1;height:4px;background:rgba(255,255,255,.07);border-radius:2px;overflow:hidden;}
.cfil{height:100%;border-radius:2px;background:linear-gradient(90deg,var(--a2),var(--a1));}
.air{font-size:11px;color:var(--t2);line-height:1.7;}

/* NEWS */
.nc{margin:0 16px 8px;padding:12px;background:var(--card);border:1px solid var(--cb);border-radius:12px;cursor:pointer;transition:.2s;}
.nc:hover{border-color:var(--a2);transform:translateX(3px);}
.nct{display:flex;justify-content:space-between;margin-bottom:5px;}
.ncs,.nctm{font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);}
.nch{font-size:11px;font-weight:600;line-height:1.5;margin-bottom:6px;}
.ncr{display:flex;align-items:center;gap:6px;}
.ntg{padding:2px 7px;border-radius:4px;font-size:8px;font-family:'Share Tech Mono',monospace;font-weight:700;}
.eb{background:rgba(0,230,118,.12);color:#00e676;}.es{background:rgba(255,45,85,.12);color:#ff2d55;}.en{background:rgba(255,215,0,.12);color:#ffd700;}
.nbar{flex:1;height:2px;background:rgba(255,255,255,.05);border-radius:2px;overflow:hidden;}
.nbf{height:100%;border-radius:2px;}
.ncd{font-size:10px;color:var(--t2);margin-top:8px;padding-top:7px;border-top:1px solid rgba(255,255,255,.06);line-height:1.6;}

/* F&O */
.fog{display:grid;grid-template-columns:1fr 1fr;gap:8px;padding:0 16px 12px;}
.foc{background:var(--card);border:1px solid var(--cb);border-radius:12px;padding:12px;}
.fol{font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:.8px;margin-bottom:4px;}
.fov{font-family:'Share Tech Mono',monospace;font-size:16px;font-weight:700;}
.fos{font-size:9px;font-family:'Share Tech Mono',monospace;margin-top:2px;}
.gkg{display:grid;grid-template-columns:repeat(5,1fr);gap:5px;padding:0 16px 10px;}
.gk{background:var(--card);border:1px solid var(--cb);border-radius:8px;padding:9px 5px;text-align:center;}
.gksm{font-size:18px;font-weight:900;margin-bottom:2px;}
.gkn{font-size:7px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:3px;}
.gkv{font-family:'Share Tech Mono',monospace;font-size:10px;font-weight:700;}
.ocw{overflow-x:auto;margin:0 16px;border:1px solid var(--cb);border-radius:12px;background:var(--card);}
.oct{width:100%;border-collapse:collapse;font-size:10px;}
.oct th{padding:7px 6px;font-family:'Share Tech Mono',monospace;font-size:8px;color:var(--t3);letter-spacing:.5px;border-bottom:1px solid rgba(255,255,255,.06);text-align:center;}
.oct td{padding:5px 6px;text-align:center;font-family:'Share Tech Mono',monospace;font-size:10px;border-bottom:1px solid rgba(255,255,255,.03);cursor:pointer;}
.oct tr:hover td{background:rgba(255,255,255,.03);}
.oct tr.atm td{background:rgba(0,245,255,.06)!important;}

/* IPO */
.ipoc{margin:0 16px 10px;padding:14px;background:var(--card);border:1px solid var(--cb);border-radius:14px;}
.ipot{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px;}
.ipon{font-family:'Orbitron',sans-serif;font-size:13px;font-weight:700;}
.ipos{font-size:9px;color:var(--t3);margin-top:2px;}
.iposs{padding:4px 10px;border-radius:20px;font-size:9px;font-family:'Share Tech Mono',monospace;font-weight:700;}
.sto{background:rgba(0,230,118,.15);color:#00e676;}.stu{background:rgba(255,215,0,.15);color:#ffd700;}.stl{background:rgba(0,245,255,.12);color:#00f5ff;}
.ipog{display:grid;grid-template-columns:1fr 1fr 1fr;gap:7px;margin-bottom:10px;}
.igi{background:rgba(0,0,0,.35);border-radius:8px;padding:8px;text-align:center;}
.igl{font-size:7px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:.5px;margin-bottom:3px;}
.igv{font-family:'Share Tech Mono',monospace;font-size:11px;font-weight:700;}
.gmp{display:flex;align-items:center;gap:8px;padding:9px 12px;background:rgba(0,230,118,.05);border:none;border-radius:8px;margin-bottom:10px;}
.gmpl{font-size:9px;font-family:'Share Tech Mono',monospace;color:var(--t2);}
.gmpv{font-family:'Share Tech Mono',monospace;font-size:15px;font-weight:700;color:#00e676;margin-left:auto;}
.gmpp{font-family:'Share Tech Mono',monospace;font-size:10px;color:#00e676;}
.ipoapply{width:100%;padding:10px;border:none;border-radius:10px;background:linear-gradient(135deg,#00e676,#00a860);color:#000;font-family:'Orbitron',sans-serif;font-size:11px;font-weight:700;cursor:pointer;}

/* MF */
.mfc{margin:0 16px 10px;padding:14px;background:var(--card);border:1px solid var(--cb);border-radius:14px;cursor:pointer;transition:.2s;}
.mfc:hover{border-color:var(--a2);transform:translateX(3px);}
.mfn{font-size:13px;font-weight:700;line-height:1.4;}
.mfcat{font-size:9px;color:var(--t3);margin-top:2px;}
.mfrv{font-family:'Share Tech Mono',monospace;font-size:16px;font-weight:700;color:var(--gr);}
.mfrl{font-size:8px;color:var(--t3);}
.mfbar{height:3px;background:rgba(255,255,255,.06);border-radius:2px;overflow:hidden;margin:8px 0;}
.mfbf{height:100%;border-radius:2px;background:linear-gradient(90deg,var(--a2),var(--a1));}
/* SIP */
.sipc{margin:0 16px 12px;padding:16px;background:var(--card);border:1px solid var(--cb);border-radius:14px;}
.sipt{font-family:'Orbitron',sans-serif;font-size:12px;font-weight:700;margin-bottom:14px;background:linear-gradient(90deg,var(--a1),var(--a2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.sipf{margin-bottom:12px;}
.sipl{font-size:9px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:.5px;margin-bottom:4px;display:flex;justify-content:space-between;}
.sipl span:last-child{color:var(--a2);}
input[type=range]{width:100%;accent-color:var(--a2);}
.sipres{background:var(--hg);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:14px;margin-top:12px;}
.srg{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.sri{text-align:center;}
.srl{font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:.5px;margin-bottom:3px;}
.srv{font-family:'Orbitron',sans-serif;font-size:13px;font-weight:800;}

/* PAPER TRADE */
.pth{margin:12px 16px;padding:16px;border-radius:16px;background:var(--hg);border:1px solid rgba(255,255,255,.08);}
.ptbal{font-family:'Orbitron',sans-serif;font-size:22px;font-weight:800;background:linear-gradient(135deg,var(--a1),#fff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.ptf{margin:0 16px 12px;padding:14px;background:var(--card);border:1px solid var(--cb);border-radius:14px;}
.ptg{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px;}
.pti{width:100%;background:rgba(0,0,0,.4);border:1px solid var(--cb);border-radius:8px;padding:10px 12px;color:var(--t1);font-family:'Share Tech Mono',monospace;font-size:13px;outline:none;transition:.2s;}
.pti:focus{border-color:var(--a2);}
.ptb{padding:10px;border:none;border-radius:8px;font-family:'Orbitron',sans-serif;font-size:11px;font-weight:700;cursor:pointer;flex:1;}
.ptbb{background:linear-gradient(135deg,#00e676,#00a860);color:#000;}
.ptbs{background:linear-gradient(135deg,#ff2d55,#c0392b);color:#fff;}
.ptpos{margin:0 16px 8px;padding:12px;background:var(--card);border:1px solid var(--cb);border-radius:12px;}
.ptlog{margin:0 16px 6px;padding:9px 12px;background:var(--card);border:1px solid var(--cb);border-radius:9px;display:flex;align-items:center;justify-content:space-between;font-size:10px;}

/* CHAT */
.chatw{display:flex;flex-direction:column;height:100%;}
.chatm{flex:1;overflow-y:auto;padding:10px 14px;display:flex;flex-direction:column;gap:8px;}
.chatm::-webkit-scrollbar{width:0;}
.cmsg{max-width:78%;padding:9px 12px;border-radius:12px;font-size:12px;line-height:1.5;}
.cthem{background:var(--card);border:1px solid var(--cb);border-radius:12px 12px 12px 2px;align-self:flex-start;}
.cme{background:rgba(0,245,255,.1);border:1px solid rgba(0,245,255,.2);border-radius:12px 12px 2px 12px;align-self:flex-end;}
.cnm{font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:3px;}
.ctm{font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-top:3px;text-align:right;}
.chatbar{padding:10px 14px;background:var(--top);border-top:1px solid rgba(255,255,255,.06);display:flex;gap:8px;flex-shrink:0;}
.chati{flex:1;background:rgba(0,0,0,.4);border:1px solid var(--cb);border-radius:20px;padding:8px 14px;color:var(--t1);font-size:13px;outline:none;font-family:'Rajdhani',sans-serif;}
.chati:focus{border-color:var(--a2);}
.chatsnd{width:36px;height:36px;border-radius:50%;border:none;background:linear-gradient(135deg,var(--a2),rgba(0,200,212,1));color:#000;font-size:15px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;}

/* ALERTS */
.alf{margin:0 16px 12px;padding:14px;background:var(--card);border:1px solid var(--cb);border-radius:14px;}
.ali{width:100%;background:rgba(0,0,0,.4);border:1px solid var(--cb);border-radius:8px;padding:10px 12px;color:var(--t1);font-family:'Share Tech Mono',monospace;font-size:13px;outline:none;transition:.2s;}
.ali:focus{border-color:var(--a1);}
.alrow{margin:0 16px 7px;padding:10px 12px;background:var(--card);border:1px solid rgba(255,215,0,.25);border-radius:10px;display:flex;align-items:center;justify-content:space-between;}

/* QUIZ */
.quizc{margin:0 16px 12px;padding:16px;background:var(--card);border:1px solid var(--cb);border-radius:16px;}
.quizq{font-size:14px;font-weight:600;line-height:1.6;margin-bottom:14px;}
.qopts{display:flex;flex-direction:column;gap:8px;}
.qopt{padding:11px 14px;border:1px solid var(--cb);border-radius:10px;background:rgba(0,0,0,.2);font-size:12px;cursor:pointer;transition:.2s;text-align:left;color:var(--t1);font-family:'Rajdhani',sans-serif;}
.qopt:hover{border-color:var(--a2);}
.qopt.ok{background:rgba(0,230,118,.15);border-color:#00e676;color:#00e676;}
.qopt.no{background:rgba(255,45,85,.15);border-color:#ff2d55;color:#ff2d55;}
.qexp{font-size:11px;color:var(--t2);margin-top:10px;padding:10px;background:rgba(0,0,0,.2);border-radius:8px;line-height:1.6;display:none;}
.learnc{margin:0 16px 10px;padding:14px;background:var(--card);border:1px solid var(--cb);border-radius:14px;cursor:pointer;transition:.2s;}
.learnc:hover{border-color:var(--a2);transform:translateX(3px);}

/* THEME PICKER */
.thpick{position:fixed;inset:0;z-index:600;background:rgba(0,0,0,.8);backdrop-filter:blur(12px);display:none;align-items:flex-end;}
.thpick.on{display:flex;}
.thsh{width:100%;background:linear-gradient(180deg,var(--s2),var(--s1));border-radius:24px 24px 0 0;border-top:1px solid rgba(255,255,255,.1);padding:20px 20px 44px;position:relative;animation:slu .35s ease;}
@keyframes slu{from{transform:translateY(60px);opacity:0}to{transform:translateY(0);opacity:1}}
.thsh::before{content:'';position:absolute;top:0;left:15%;right:15%;height:1px;background:linear-gradient(90deg,transparent,var(--a2),transparent);}
.tbar2{width:32px;height:3px;background:var(--b2);border-radius:2px;margin:0 auto 18px;}
.thtitle{font-family:'Orbitron',sans-serif;font-size:14px;font-weight:700;text-align:center;margin-bottom:16px;background:linear-gradient(90deg,var(--a1),var(--a2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.thg{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}
.tho{border-radius:14px;padding:12px;text-align:center;cursor:pointer;transition:.2s;border:2px solid transparent;position:relative;}
.tho.act{border-color:var(--a2);}
.tho:hover{transform:scale(1.04);}
.thpv{height:44px;border-radius:8px;margin-bottom:8px;}
.thnm{font-family:'Orbitron',sans-serif;font-size:9px;font-weight:700;}
.thck{position:absolute;top:8px;right:8px;font-size:14px;display:none;}
.tho.act .thck{display:block;}

/* ORDER */
.ov{position:fixed;inset:0;z-index:500;display:none;align-items:flex-end;background:rgba(0,0,0,.8);backdrop-filter:blur(10px);}
.ov.on{display:flex;}
.ovs{width:100%;background:linear-gradient(180deg,var(--s2),var(--s1));border-radius:22px 22px 0 0;border-top:1px solid rgba(255,255,255,.1);padding:18px 18px 42px;position:relative;max-height:88vh;overflow-y:auto;animation:slu .4s cubic-bezier(.34,1.56,.64,1);}
.ovs::before{content:'';position:absolute;top:0;left:15%;right:15%;height:1px;background:linear-gradient(90deg,transparent,var(--a2),transparent);}
.ovbar{width:32px;height:3px;background:var(--b2);border-radius:2px;margin:0 auto 16px;}
.ossym{font-family:'Orbitron',sans-serif;font-size:16px;font-weight:800;background:linear-gradient(90deg,var(--a1),#fff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.ostw{display:flex;gap:4px;background:rgba(0,0,0,.4);border-radius:9px;padding:3px;}
.ott{padding:6px 16px;border-radius:7px;border:none;background:transparent;font-family:'Orbitron',sans-serif;font-size:11px;font-weight:700;cursor:pointer;transition:.2s;color:var(--t3);}
.ott.ba{background:linear-gradient(135deg,#00e676,#00a860);color:#000;}
.ott.sa{background:linear-gradient(135deg,#ff2d55,#c0392b);color:#fff;}
.osseg{display:flex;gap:3px;background:rgba(0,0,0,.3);border-radius:7px;padding:3px;margin-bottom:10px;}
.ossb{flex:1;padding:6px 4px;border-radius:5px;border:none;background:transparent;font-size:10px;color:var(--t3);cursor:pointer;transition:.2s;font-family:'Rajdhani',sans-serif;text-align:center;}
.ossb.a{background:rgba(0,245,255,.1);color:var(--a2);}
.osg{display:grid;grid-template-columns:1fr 1fr;gap:8px;}
.osi{width:100%;background:rgba(0,0,0,.4);border:1px solid var(--cb);border-radius:8px;padding:10px 12px;color:var(--t1);font-family:'Share Tech Mono',monospace;font-size:14px;outline:none;transition:.2s;margin-bottom:10px;}
.osi:focus{border-color:var(--a2);}
.osmgn{background:rgba(255,215,0,.06);border:1px solid rgba(255,215,0,.15);border-radius:8px;padding:10px;margin-bottom:12px;display:flex;justify-content:space-between;}
.ossub{width:100%;padding:13px;border:none;border-radius:12px;font-family:'Orbitron',sans-serif;font-size:13px;font-weight:800;cursor:pointer;letter-spacing:1px;}
.ossub-b{background:linear-gradient(135deg,#00e676,#00a860);color:#000;box-shadow:0 0 20px rgba(0,230,118,.3);}
.ossub-s{background:linear-gradient(135deg,#ff2d55,#c0392b);color:#fff;}

/* VOICE */
.vov{position:fixed;inset:0;z-index:500;display:none;align-items:flex-end;background:rgba(0,0,0,.85);backdrop-filter:blur(14px);}
.vov.on{display:flex;}
.vovs{width:100%;background:linear-gradient(180deg,var(--s2),var(--s1));border-radius:28px 28px 0 0;border-top:1px solid rgba(255,215,0,.3);padding:22px 22px 44px;position:relative;animation:slu .4s ease;}
.vbull{width:70px;height:70px;border-radius:50%;margin:0 auto 16px;background:rgba(255,215,0,.15);border:2px solid rgba(255,215,0,.35);display:flex;align-items:center;justify-content:center;font-size:28px;animation:vbp 1.5s infinite;}
@keyframes vbp{0%,100%{box-shadow:0 0 0 0 rgba(255,215,0,.4);}50%{box-shadow:0 0 0 18px transparent;}}
.vwaves{display:flex;gap:4px;justify-content:center;height:34px;align-items:center;margin-bottom:12px;}
.vwaves span{width:3px;border-radius:3px;background:linear-gradient(180deg,var(--a1),var(--a2));}
.vtitle{font-family:'Orbitron',sans-serif;font-size:15px;font-weight:700;text-align:center;background:linear-gradient(90deg,var(--a1),var(--a2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.vres{font-family:'Share Tech Mono',monospace;font-size:12px;color:var(--t1);text-align:center;min-height:18px;margin:8px 0 12px;}
.vcmds{display:flex;flex-wrap:wrap;gap:5px;justify-content:center;}
.vcmd{padding:5px 12px;background:rgba(255,215,0,.08);border:1px solid rgba(255,215,0,.2);border-radius:20px;font-size:9px;color:var(--a1);cursor:pointer;font-family:'Share Tech Mono',monospace;transition:.2s;}
.vcmd:hover{background:rgba(255,215,0,.15);}

/* NOTIF */
.nfpop{position:fixed;top:76px;left:50%;transform:translateX(-50%) translateY(-16px);background:var(--s2);border:1px solid rgba(0,245,255,.2);border-radius:14px;padding:12px 16px;z-index:700;opacity:0;pointer-events:none;transition:all .3s;min-width:280px;max-width:90vw;box-shadow:0 8px 40px rgba(0,0,0,.7);}
.nfpop.on{opacity:1;transform:translateX(-50%) translateY(0);}
.nft{font-family:'Orbitron',sans-serif;font-size:12px;font-weight:700;background:linear-gradient(90deg,var(--a1),var(--t1));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.nfb{font-size:10px;color:var(--t2);line-height:1.5;margin-top:3px;}

/* COMPARE BANNER */
.compbanner{margin:0;padding:16px;background:#111111;border:none;border-top:1px solid #1a1a1a;border-bottom:1px solid #1a1a1a;}
.cbt{font-family:'Rajdhani',sans-serif;font-size:14px;font-weight:700;color:#ffffff;margin-bottom:12px;}
.cbr{display:flex;justify-content:space-between;align-items:center;margin-bottom:7px;font-size:12px;}
.cbf{color:#888888;font-family:'Rajdhani',sans-serif;flex:1;}.cbs{color:#e74c3c;font-family:'Rajdhani',sans-serif;font-size:12px;}.cbb{color:#25c866;font-family:'Rajdhani',sans-serif;font-size:12px;font-weight:700;}

/* MORE */
.mrg{display:grid;grid-template-columns:1fr 1fr;gap:8px;padding:0 16px 16px;}
.mrc{background:var(--card);border:1px solid var(--cb);border-radius:14px;padding:14px;cursor:pointer;transition:.2s;}
.mrc:hover{border-color:var(--a1);transform:translateY(-2px);}
.mri{font-size:26px;margin-bottom:8px;}
.mrn{font-family:'Orbitron',sans-serif;font-size:11px;font-weight:700;margin-bottom:3px;}
.mrs{font-size:9px;color:var(--t3);}

/* PORTFOLIO */
.pfh{margin:12px 16px;padding:16px;border-radius:16px;background:var(--hg);border:1px solid rgba(255,255,255,.08);}
.pfv{font-family:'Orbitron',sans-serif;font-size:30px;font-weight:900;background:linear-gradient(135deg,var(--a1),#fff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.hold{margin:0 16px 8px;padding:12px;background:var(--card);border:1px solid var(--cb);border-radius:12px;cursor:pointer;transition:.2s;}
.hold:hover{border-color:var(--a2);}
.holdbar{height:3px;background:rgba(255,255,255,.05);border-radius:2px;overflow:hidden;margin-top:6px;}
.holdbf{height:100%;border-radius:2px;}

/* ADMIN */
.admi{width:100%;background:rgba(0,0,0,.5);border:1px solid var(--cb);border-radius:10px;padding:12px 14px;color:var(--t1);font-size:14px;outline:none;transition:.2s;margin-bottom:10px;font-family:'Share Tech Mono',monospace;}
.admi:focus{border-color:var(--a2);}

@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.cnt>*{animation:fadeUp .25s ease both;}
</style>
</head>
<body data-theme="galaxy">




<div class="app">
  <!-- TOPBAR -->
  <div class="tb" id="mainTb">
    <div class="logo" onclick="goTo('home')">
      <svg class="logo-svg" viewBox="0 0 38 38" fill="none">
        <defs>
          <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#ffd700"/><stop offset="100%" stop-color="#00f5ff"/></linearGradient>
          <linearGradient id="g2" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#ffd700"/><stop offset="100%" stop-color="#ff6b35"/></linearGradient>
        </defs>
        <circle cx="19" cy="19" r="17" stroke="url(#g1)" stroke-width="1.5"/>
        <circle cx="19" cy="19" r="12" stroke="url(#g1)" stroke-width="1" stroke-dasharray="2 2" opacity=".6"/>
        <circle cx="19" cy="19" r="8" fill="url(#g2)" opacity=".2"/>
        <circle cx="19" cy="19" r="5" fill="url(#g2)"/>
        <circle cx="19" cy="19" r="2.2" fill="#fff"/>
        <path d="M12 14 Q9 8 13 10" stroke="#ffd700" stroke-width="1.8" stroke-linecap="round" fill="none"/>
        <path d="M26 14 Q29 8 25 10" stroke="#ffd700" stroke-width="1.8" stroke-linecap="round" fill="none"/>
        <line x1="19" y1="2" x2="19" y2="7.5" stroke="url(#g1)" stroke-width="1.2"/>
        <line x1="19" y1="30.5" x2="19" y2="36" stroke="url(#g1)" stroke-width="1.2"/>
        <line x1="2" y1="19" x2="7.5" y2="19" stroke="url(#g1)" stroke-width="1.2"/>
        <line x1="30.5" y1="19" x2="36" y2="19" stroke="url(#g1)" stroke-width="1.2"/>
      </svg>
      <div><div class="logo-nm">BULLS EYE</div><div class="logo-sub">GLOBAL TRADING INTELLIGENCE</div></div>
    </div>
    <div class="tbr">
      <div class="tbb" onclick="openThemes()" title="6 Themes">ğŸ¨</div>
      <div class="tbb" id="vbtn" onclick="toggleVoice()">ğŸ™ï¸</div>
      <div class="tbb" onclick="showNotif('ğŸ””','Admin Alert','NIFTY 22200 CE active! PCR 1.24 â€” bullish. BUY on dips recommended.')">ğŸ””<span class="ndot"></span></div>
      <div class="tbb" onclick="goTo('admin')">âš™ï¸</div>
      <div class="ava" onclick="goTo('portfolio')">AK</div>
    </div>
  </div>

  <!-- MARKET STRIP -->
  <div class="mst-wrap" id="mstrip"></div>

  <!-- ALL SCREENS -->
  <div class="scr on" id="homeScreen"><div class="cnt" id="homeC"></div></div>
  <div class="scr" id="watchlistScreen"><div class="cnt" id="wlC"></div></div>
  <div class="scr" id="globalScreen"><div class="cnt" id="globalC"></div></div>
  <div class="scr" id="foScreen"><div class="cnt" id="foC"></div></div>
  <div class="scr" id="moreScreen"><div class="cnt" id="moreC"></div></div>
  <div class="scr" id="portfolioScreen"><div class="cnt" id="pfC"></div></div>
  <div class="scr" id="ipoScreen"><div class="cnt" id="ipoC"></div></div>
  <div class="scr" id="mfScreen"><div class="cnt" id="mfC"></div></div>
  <div class="scr" id="paperScreen"><div class="cnt" id="paperC"></div></div>
  <div class="scr" id="alertScreen"><div class="cnt" id="alertC"></div></div>
  <div class="scr" id="quizScreen"><div class="cnt" id="quizC"></div></div>

  <!-- DETAIL -->
  <div class="scr" id="detailScreen">
    <div class="dhdr" id="dhdr"></div>
    <div class="ctf" id="ctf">
      <button class="tf a" onclick="tfTab(this,'1m')">1m</button>
      <button class="tf" onclick="tfTab(this,'5m')">5m</button>
      <button class="tf" onclick="tfTab(this,'15m')">15m</button>
      <button class="tf" onclick="tfTab(this,'1H')">1H</button>
      <button class="tf" onclick="tfTab(this,'1D')">1D</button>
      <button class="tf" onclick="tfTab(this,'1W')">1W</button>
    </div>
    <div class="cwrap"><canvas id="ccv" width="430" height="170"></canvas></div>
    <div class="cnt" id="detailC"></div>
  </div>

  <!-- CHAT -->
  <div class="scr" id="chatScreen">
    <div class="dhdr" style="padding:10px 14px;">
      <div style="display:flex;align-items:center;gap:8px;">
        <div class="bk" onclick="goBack()">â†</div>
        <div>
          <div style="font-family:'Orbitron',sans-serif;font-size:14px;font-weight:700;">Live Traders Chat</div>
          <div style="display:flex;align-items:center;gap:5px;margin-top:2px;"><div style="width:6px;height:6px;background:var(--gr);border-radius:50%;animation:blink 2s infinite;"></div><span style="font-size:9px;font-family:'Share Tech Mono',monospace;color:var(--gr);" id="chOL">482 online</span></div>
        </div>
      </div>
    </div>
    <div class="chatw" style="flex:1;overflow:hidden;">
      <div class="chatm" id="chatM"></div>
      <div class="chatbar">
        <input class="chati" id="chInp" type="text" placeholder="Market discuss karo..." onkeydown="if(event.key==='Enter')sendChat()">
        <button class="chatsnd" onclick="sendChat()">â¤</button>
      </div>
    </div>
  </div>

  <!-- ADMIN -->
  <div class="scr" id="adminScreen">
    <div class="tb" style="position:relative;">
      <div style="display:flex;align-items:center;gap:8px;">
        <div class="bk" onclick="goTo('home')">â†</div>
        <div>
          <div style="font-family:'Orbitron',sans-serif;font-size:13px;font-weight:800;background:linear-gradient(90deg,var(--a1),var(--a2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;">ADMIN PANEL</div>
          <div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);">OWNER ACCESS ONLY</div>
        </div>
      </div>
      <div style="font-size:9px;font-family:'Share Tech Mono',monospace;color:var(--gr);">â— SECURE</div>
    </div>
    <div class="cnt">
      <div id="adminLogin" style="padding:20px 16px;">
        <div style="font-family:'Orbitron',sans-serif;font-size:18px;font-weight:900;background:linear-gradient(135deg,var(--a1),var(--a2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:4px;">ğŸ” ADMIN LOGIN</div>
        <div style="font-size:10px;color:var(--t2);font-family:'Share Tech Mono',monospace;margin-bottom:20px;">Bulls Eye Owner Panel</div>
        <input class="admi" type="password" id="apass" placeholder="Admin Password" onkeydown="if(event.key==='Enter')doLogin()">
        <input class="admi" type="text" id="akey" placeholder="Secret Key" onkeydown="if(event.key==='Enter')doLogin()">
        <button style="width:100%;padding:13px;background:linear-gradient(135deg,var(--a1),var(--a2));border:none;border-radius:11px;color:#000;font-family:'Orbitron',sans-serif;font-size:13px;font-weight:800;cursor:pointer;" onclick="doLogin()">ğŸš€ ACCESS PANEL</button>
        <div id="aerr" style="font-size:10px;color:var(--rd);margin-top:8px;text-align:center;font-family:'Share Tech Mono',monospace;"></div>
      </div>
      <div id="adminPanel" style="display:none;padding:0 0 20px;">
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;padding:14px 16px;">
          <div class="card" style="padding:12px;"><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:1px;margin-bottom:3px;">TOTAL USERS</div><div style="font-family:'Orbitron',sans-serif;font-size:20px;font-weight:800;" class="up">12,847</div><div style="font-size:9px;color:var(--t2);">+284 today</div></div>
          <div class="card" style="padding:12px;"><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:1px;margin-bottom:3px;">ACTIVE NOW</div><div style="font-family:'Orbitron',sans-serif;font-size:20px;font-weight:800;" style="color:var(--a2);">1,482</div><div style="font-size:9px;color:var(--t2);">482 in chat</div></div>
          <div class="card" style="padding:12px;"><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:1px;margin-bottom:3px;">PAPER TRADES</div><div style="font-family:'Orbitron',sans-serif;font-size:20px;font-weight:800;" style="color:var(--a1);">8,492</div></div>
          <div class="card" style="padding:12px;"><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:1px;margin-bottom:3px;">APP VERSION</div><div style="font-family:'Orbitron',sans-serif;font-size:20px;font-weight:800;" style="color:var(--a3);">v2.0.0</div></div>
        </div>
        <div style="padding:0 16px 8px;font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a2);letter-spacing:1.5px;">ğŸ“¢ PUSH NOTIFICATION</div>
        <div class="card" style="margin:0 16px 12px;padding:14px;">
          <input class="admi" type="text" id="ntit" placeholder="Title: RELIANCE BUY Alert!">
          <textarea class="admi" id="nbod" rows="2" style="resize:none;" placeholder="Message body..."></textarea>
          <button style="width:100%;padding:10px;border:none;border-radius:9px;background:linear-gradient(135deg,var(--a2),rgba(0,200,212,1));color:#000;font-family:'Orbitron',sans-serif;font-size:11px;font-weight:700;cursor:pointer;margin-bottom:8px;" onclick="sendAdminN()">ğŸ“¤ SEND TO ALL 12,847 USERS</button>
          <input class="admi" type="text" id="vtxt" placeholder="Voice message likhein...">
          <button style="width:100%;padding:10px;border:none;border-radius:9px;background:linear-gradient(135deg,var(--a1),rgba(240,184,0,1));color:#000;font-family:'Orbitron',sans-serif;font-size:11px;font-weight:700;cursor:pointer;" onclick="sendVoiceN()">ğŸ”Š VOICE NOTIFICATION</button>
        </div>
        <div style="padding:0 16px 8px;font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a2);letter-spacing:1.5px;">âš™ï¸ APP CONTROL</div>
        <div class="card" style="margin:0 16px;padding:14px;">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
            <span style="font-size:12px;font-weight:600;">Maintenance Mode</span>
            <div id="mslide" onclick="toggleMaint()" style="width:44px;height:24px;background:var(--b2);border-radius:24px;cursor:pointer;position:relative;transition:.3s;"><div id="mknob" style="position:absolute;width:18px;height:18px;left:3px;top:3px;background:#fff;border-radius:50%;transition:.3s;"></div></div>
          </div>
          <div style="margin-bottom:8px;"><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:4px;">VERSION</div><input class="admi" style="margin-bottom:0;" type="text" id="nver" value="v2.1.0"></div>
          <button style="width:100%;padding:10px;border:none;border-radius:9px;background:linear-gradient(135deg,var(--a2),rgba(0,200,212,1));color:#000;font-family:'Orbitron',sans-serif;font-size:11px;font-weight:700;cursor:pointer;" onclick="showNotif('ğŸš€','Update Pushed!','v'+document.getElementById('nver').value+' push notification sent to all users!')">ğŸš€ PUSH UPDATE</button>
        </div>
      </div>
    </div>
  </div>

  <!-- BOTTOM NAV -->
  <div class="bnav" id="mainBnav">
    <div class="bn act" id="bn-home" onclick="goTo('home')"><div class="bni">ğŸ </div><div class="bnl">Home</div></div>
    <div class="bn" id="bn-watchlist" onclick="goTo('watchlist')"><div class="bni">ğŸ”–</div><div class="bnl">Watchlist</div></div>
    <div class="bn-trade" onclick="goTo('fo')">â‡…</div>
    <div class="bn" id="bn-global" onclick="goTo('global')"><div class="bni">ğŸ“‹</div><div class="bnl">Orders</div></div>
    <div class="bn" id="bn-fo" onclick="goTo('portfolio')"><div class="bni">ğŸ’¼</div><div class="bnl">Portfolio</div></div>
  </div>
</div>

<!-- THEME PICKER -->
<div class="thpick" id="thpick" onclick="if(event.target===this)closeThemes()">
  <div class="thsh">
    <div class="tbar2"></div>
    <div class="thtitle">ğŸ¨ CHOOSE YOUR THEME</div>
    <div class="thg" id="thg"></div>
    <button onclick="closeThemes()" style="margin-top:14px;width:100%;padding:11px;border-radius:11px;border:1px solid var(--cb);background:rgba(0,0,0,.4);color:var(--t2);font-size:12px;cursor:pointer;font-family:'Rajdhani',sans-serif;">CLOSE</button>
  </div>
</div>

<!-- ORDER OVERLAY -->
<div class="ov" id="orderOv" onclick="if(event.target===this)closeOrder()">
  <div class="ovs">
    <div class="ovbar"></div>
    <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:14px;">
      <div><div style="font-size:7px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:1px;margin-bottom:3px;" id="olbl">REAL ORDER</div><div class="ossym" id="osym">RELIANCE</div><div style="font-size:9px;font-family:'Share Tech Mono',monospace;color:var(--t2);" id="opr">â‚¹2,847</div></div>
      <div style="display:flex;gap:6px;align-items:center;"><div class="ostw"><button class="ott ba" id="otB" onclick="setOT('BUY')">BUY</button><button class="ott" id="otS" onclick="setOT('SELL')">SELL</button></div><button onclick="closeOrder()" style="width:26px;height:26px;border-radius:6px;border:1px solid var(--cb);background:rgba(0,0,0,.4);color:var(--t2);cursor:pointer;">âœ•</button></div>
    </div>
    <div class="osseg"><button class="ossb a" onclick="oSeg(this)">Intraday</button><button class="ossb" onclick="oSeg(this)">Delivery</button></div>
    <div class="osseg"><button class="ossb a" onclick="oSeg(this)">LIMIT</button><button class="ossb" onclick="oSeg(this)">MARKET</button><button class="ossb" onclick="oSeg(this)">SL</button><button class="ossb" onclick="oSeg(this)">SL-M</button></div>
    <div class="osg"><div><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:4px;">PRICE</div><input class="osi" type="number" id="oprice" value="2847" oninput="calcM()"></div><div><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:4px;">QUANTITY</div><input class="osi" type="number" id="oqty" value="1" oninput="calcM()"></div></div>
    <div class="osmgn"><span style="font-size:11px;color:var(--t2);">Margin Required</span><span style="font-family:'Share Tech Mono',monospace;font-weight:700;color:var(--a1);" id="omgn">â‚¹569</span></div>
    <button class="ossub ossub-b" id="osub" onclick="placeOrder()">âš¡ BUY ORDER CONFIRM</button>
  </div>
</div>

<!-- VOICE OVERLAY -->
<div class="vov" id="voiceOv">
  <div class="vovs" style="position:relative;">
    <div style="width:32px;height:3px;background:var(--b2);border-radius:2px;margin:0 auto 18px;"></div>
    <div class="vbull">ğŸ¯</div>
    <div class="vwaves" id="vwv"><span id="vw1" style="height:8px"></span><span id="vw2" style="height:16px"></span><span id="vw3" style="height:28px"></span><span id="vw4" style="height:16px"></span><span id="vw5" style="height:8px"></span></div>
    <div class="vtitle">BULLS EYE SUNTA HAI</div>
    <div style="font-size:10px;color:var(--t2);text-align:center;margin-top:3px;">Hinglish mein boliye â€” samajh lega!</div>
    <div class="vres" id="vres">ğŸ™ï¸ Active hai...</div>
    <div class="vcmds">
      <span class="vcmd" onclick="execV('reliance dikho')">RELIANCE dikho</span>
      <span class="vcmd" onclick="execV('global markets')">Global markets</span>
      <span class="vcmd" onclick="execV('ipo dikho')">IPO dikho</span>
      <span class="vcmd" onclick="execV('mutual funds')">Mutual funds</span>
      <span class="vcmd" onclick="execV('paper trading')">Paper trading</span>
      <span class="vcmd" onclick="execV('chat kholo')">Chat kholo</span>
      <span class="vcmd" onclick="execV('nifty kya hai')">Nifty kya hai?</span>
      <span class="vcmd" onclick="execV('gold price')">Gold price</span>
      <span class="vcmd" onclick="execV('theme badlo')">Theme badlo</span>
      <span class="vcmd" onclick="execV('f and o')">F&O Center</span>
    </div>
    <button onclick="toggleVoice()" style="margin-top:14px;width:100%;padding:11px;border-radius:11px;border:1px solid var(--cb);background:rgba(0,0,0,.4);color:var(--t2);font-size:12px;cursor:pointer;font-family:'Rajdhani',sans-serif;">âŒ Band Karo</button>
  </div>
</div>

<!-- NOTIFICATION -->
<div class="nfpop" id="nfpop">
  <div style="display:flex;gap:10px;align-items:flex-start;">
    <div id="nfico" style="font-size:18px;flex-shrink:0;">ğŸ“ˆ</div>
    <div><div class="nft" id="nftit"></div><div class="nfb" id="nfbod"></div></div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â• DATA â•â•â•â•â•â•â•â•â•â•
const STOCKS=[
  {sym:'RELIANCE',nm:'Reliance Industries',sec:'Oil & Gas',price:2847.30,chg:1.42,col:'#00f5ff',sig:'BUY',conf:82,t1:2950,t2:3100,sl:2750,tf:'2â€“4 weeks',why:'Jio 5G expansion strong. O2C margin recovery. Retail dominance. FII buying â‚¹2,400Cr this week.',
   news:[{src:'ET',t:'2h',h:'Jio 5G expands to 100 cities â€” tariff hike expected Q1',eff:'BULLISH',imp:78,det:'5G expansion = higher ARPU + subscriber growth acceleration.'},{src:'BS',t:'4h',h:'RIL Q3 profit â‚¹17,265 Cr â€” beats all estimates by 8%',eff:'BULLISH',imp:85,det:'Strong results. Institutional buying expected to continue.'}]},
  {sym:'TCS',nm:'Tata Consultancy',sec:'IT',price:3912.50,chg:0.87,col:'#00e676',sig:'HOLD',conf:68,t1:4100,t2:4350,sl:3750,tf:'4â€“6 weeks',why:'BFSI deal signings recovering slowly. Wait for Q4 FY26 guidance clarity.',
   news:[{src:'FE',t:'1h',h:'TCS wins $1.2B European banking deal â€” TCV pipeline strong',eff:'BULLISH',imp:80,det:'Large deal win improves revenue visibility for next 2 years.'}]},
  {sym:'HDFCBANK',nm:'HDFC Bank',sec:'Banking',price:1623.80,chg:-0.34,col:'#ffd700',sig:'BUY',conf:76,t1:1720,t2:1850,sl:1550,tf:'3â€“5 weeks',why:'NIM stabilizing post-merger at 3.6%. Credit growth 17% YoY. Synergies kicking in.',
   news:[{src:'CNBC',t:'30m',h:'HDFC Bank NIM improves to 3.6% â€” beats consensus 3.4%',eff:'BULLISH',imp:82,det:'NIM recovery is the biggest re-rating catalyst for FY26.'}]},
  {sym:'ICICIBANK',nm:'ICICI Bank',sec:'Banking',price:1089.60,chg:2.14,col:'#ff2d55',sig:'BUY',conf:85,t1:1180,t2:1280,sl:1020,tf:'2â€“4 weeks',why:'Best-in-class ROE 18%+. Consistent earnings beats. Digital banking leader India.',
   news:[{src:'CNBC',t:'45m',h:'ICICI Bank Q3 PAT â‚¹10,272 Cr â€” beats all estimates widely',eff:'BULLISH',imp:92,det:'Consistent outperformer. Strong buy on every dip strategy.'}]},
  {sym:'BAJFINANCE',nm:'Bajaj Finance',sec:'NBFC',price:7234.50,chg:1.89,col:'#ff6b35',sig:'BUY',conf:78,t1:7800,t2:8400,sl:6800,tf:'4â€“8 weeks',why:'RBI ban lifted. AUM growth 34%. Rural/semi-urban expansion strong.',
   news:[{src:'CNBC',t:'1h',h:'RBI lifts ban on Bajaj Finance digital products â€” massive relief rally',eff:'BULLISH',imp:90,det:'8â€“12% rally expected near term. Strong buy signal triggered.'}]},
  {sym:'INFOSYS',nm:'Infosys',sec:'IT',price:1782.40,chg:1.23,col:'#9b59ff',sig:'BUY',conf:74,t1:1900,t2:2050,sl:1680,tf:'3â€“6 weeks',why:'FY25 guidance raised 4.5â€“5%. GenAI $2B+ pipeline. Deal wins momentum.',
   news:[{src:'ET',t:'2h',h:'Infosys raises FY25 guidance â€” strong GenAI demand',eff:'BULLISH',imp:88,det:'Guidance raise is institutional buy trigger. Momentum intact.'}]},
  {sym:'TATAMOTORS',nm:'Tata Motors',sec:'Auto',price:982.70,chg:3.21,col:'#00d2ff',sig:'BUY',conf:80,t1:1080,t2:1180,sl:900,tf:'3â€“5 weeks',why:'JLR record EBIT Â£1.5B. India EV dominance 68% market share.',
   news:[{src:'Reuters',t:'2h',h:'JLR posts record Â£1.5B EBIT â€” best quarter in company history',eff:'BULLISH',imp:90,det:'JLR recovery complete. Main value driver firing on all cylinders.'}]},
  {sym:'WIPRO',nm:'Wipro',sec:'IT',price:524.30,chg:-0.56,col:'#4f8eff',sig:'SELL',conf:63,t1:480,t2:450,sl:550,tf:'2â€“3 weeks',why:'4th consecutive revenue decline. No near-term recovery trigger.',
   news:[{src:'Bloomberg',t:'3h',h:'Wipro Q3 revenue falls 1.7% QoQ â€” fourth consecutive decline',eff:'BEARISH',imp:80,det:'Avoid till new CEO strategy becomes clear. No BUY signal.'}]},
];
const GMARKETS=[
  {fl:'ğŸ‡ºğŸ‡¸',rg:'USA',sym:'DOW JONES',pr:38847,chg:0.62,up:true},
  {fl:'ğŸ‡ºğŸ‡¸',rg:'USA',sym:'S&P 500',pr:4924,chg:0.48,up:true},
  {fl:'ğŸ‡ºğŸ‡¸',rg:'USA',sym:'NASDAQ',pr:15628,chg:0.91,up:true},
  {fl:'ğŸ‡¬ğŸ‡§',rg:'Europe',sym:'FTSE 100',pr:7682,chg:-0.23,up:false},
  {fl:'ğŸ‡©ğŸ‡ª',rg:'Europe',sym:'DAX',pr:17142,chg:0.35,up:true},
  {fl:'ğŸ‡«ğŸ‡·',rg:'Europe',sym:'CAC 40',pr:7923,chg:0.18,up:true},
  {fl:'ğŸ‡¯ğŸ‡µ',rg:'Asia',sym:'NIKKEI 225',pr:37785,chg:1.24,up:true},
  {fl:'ğŸ‡¨ğŸ‡³',rg:'Asia',sym:'SHANGHAI',pr:3024,chg:-0.87,up:false},
  {fl:'ğŸ‡­ğŸ‡°',rg:'Asia',sym:'HANG SENG',pr:16482,chg:-1.12,up:false},
  {fl:'ğŸ‡¸ğŸ‡¬',rg:'Asia',sym:'STI',pr:3248,chg:0.43,up:true},
  {fl:'ğŸ‡®ğŸ‡³',rg:'India',sym:'GIFT NIFTY',pr:22195,chg:0.76,up:true},
  {fl:'ğŸ‡®ğŸ‡³',rg:'India',sym:'NIFTY 50',pr:22147,chg:0.83,up:true},
  {fl:'ğŸ‡®ğŸ‡³',rg:'India',sym:'BANK NIFTY',pr:47823,chg:0.87,up:true},
  {fl:'ğŸ‡®ğŸ‡³',rg:'India',sym:'SENSEX',pr:73158,chg:0.84,up:true},
];
const COMM=[
  {ic:'ğŸ¥‡',nm:'GOLD',pr:2028.40,chg:0.32},{ic:'ğŸ¥ˆ',nm:'SILVER',pr:23.84,chg:-0.18},
  {ic:'ğŸ›¢ï¸',nm:'CRUDE OIL',pr:78.42,chg:-0.63},{ic:'â›½',nm:'NAT GAS',pr:2.84,chg:1.24},
  {ic:'ğŸ­',nm:'COPPER',pr:3.84,chg:0.54},{ic:'ğŸ’',nm:'PLATINUM',pr:918,chg:0.21},
];
const IPOS=[
  {nm:'Ola Electric',sec:'EV / Auto',pr:76,band:'72â€“76',gmp:18,gpct:23.7,open:'27 Feb',close:'29 Feb',sz:'â‚¹6,146 Cr',st:'open',sub:'148x',lot:195},
  {nm:'Waaree Energies',sec:'Solar Energy',pr:1503,band:'1427â€“1503',gmp:210,gpct:14.0,open:'21 Feb',close:'23 Feb',sz:'â‚¹4,321 Cr',st:'listed',sub:'76x',lot:9},
  {nm:'Awfis Space',sec:'Co-working',pr:432,band:'TBD',gmp:68,gpct:15.7,open:'10 Mar',close:'12 Mar',sz:'â‚¹598 Cr',st:'upcoming',sub:'â€”',lot:34},
  {nm:'GoDigit Insurance',sec:'Insurance',pr:272,band:'258â€“272',gmp:42,gpct:15.4,open:'15 Mar',close:'17 Mar',sz:'â‚¹2,615 Cr',st:'upcoming',sub:'â€”',lot:55},
];
const MFS=[
  {nm:'Parag Parikh Flexi Cap',cat:'Flexi Cap Â· Growth',r1:32.1,r3:24.8,r5:26.4,aum:'â‚¹48,200 Cr',risk:'Medium',min:1000},
  {nm:'Quant Small Cap Fund',cat:'Small Cap Â· Growth',r1:56.8,r3:42.4,r5:38.2,aum:'â‚¹14,800 Cr',risk:'High',min:1000},
  {nm:'Mirae Asset Large Cap',cat:'Large Cap Â· Growth',r1:28.4,r3:18.2,r5:22.1,aum:'â‚¹32,400 Cr',risk:'Low-Med',min:500},
  {nm:'HDFC Mid-Cap Opp.',cat:'Mid Cap Â· Growth',r1:44.2,r3:32.1,r5:28.8,aum:'â‚¹52,100 Cr',risk:'Med-High',min:100},
  {nm:'Axis Bluechip Fund',cat:'Large Cap Â· Growth',r1:19.8,r3:14.2,r5:18.4,aum:'â‚¹38,600 Cr',risk:'Low',min:500},
];
const QUIZ=[
  {q:'PCR 1.5 ho toh market ka mood kya hota hai?',opts:['Bearish','Contrarian Bullish','Neutral','Sideways'],ans:1,exp:'PCR > 1.2 = put writers active = market mein support hai. "Contrarian Bullish" signal.'},
  {q:'Options mein "Theta Decay" kya hota hai?',opts:['Premium badhna','Time ke saath premium ghata','Delta change','Volatility increase'],ans:1,exp:'Theta = time decay. Har din option ki value ghatti hai. Sellers ka faayda hota hai.'},
  {q:'GIFT Nifty dekhne se kya jaante hain?',opts:['IPO track karna','Indian market opening sentiment','Gold price','MF NAV'],ans:1,exp:'GIFT Nifty Singapore pe 24hr trade hota hai. 9:15 AM se pehle India market direction andaza lagate hain.'},
  {q:'SIP ka full form kya hai?',opts:['Stock Investment Plan','Systematic Investment Plan','Scheduled Income Plan','Savings Interest Plan'],ans:1,exp:'SIP = Systematic Investment Plan. Monthly fixed amount invest karo. Long term mein compound growth milti hai.'},
  {q:'Delivery vs Intraday mein kya fark hai?',opts:['Delivery = same day sell','Intraday = shares demat mein','Delivery = shares demat mein, Intraday = same day close karna padta','Koi fark nahi'],ans:2,exp:'Delivery = shares Demat mein aate hain, jitne din rakho. Intraday = market close hone se pehle position close karni padti hai.'},
];
const LEARN=[
  {ic:'ğŸ“ˆ',ti:'Technical Analysis',de:'Charts, candlesticks, support/resistance',lv:'Beginner'},
  {ic:'ğŸ“Š',ti:'F&O Mastery',de:'Call, Put, Strike price, Greeks',lv:'Intermediate'},
  {ic:'ğŸ¤–',ti:'AI Trading Signals',de:'ML se BUY/SELL signals kaise kaam karte',lv:'Intermediate'},
  {ic:'ğŸŒ',ti:'Global Market Impact',de:'US market ka India par asar',lv:'Beginner'},
  {ic:'ğŸ’°',ti:'Mutual Funds Guide',de:'SIP, NAV, categories, tax',lv:'Beginner'},
  {ic:'ğŸ¯',ti:'Risk Management',de:'Stop Loss, Position Sizing, Allocation',lv:'Advanced'},
];
const CHAT_SEED=[
  {nm:'TradingPro_99',msg:'RELIANCE aaj accha lag raha! 2900 target ğŸ¯',t:'2:42',me:false},
  {nm:'NiftyHunter',msg:'ICICIBANK pe strong OI buildup 1100 CE. Bullish!',t:'2:43',me:false},
  {nm:'OptionsGuru',msg:'Nifty PCR 1.24 â€” put writers active. 22400 is week!',t:'2:44',me:false},
  {nm:'Priya_BLR',msg:'BAJFINANCE RBI ban lift ke baad full rocket! ğŸš€',t:'2:45',me:false},
  {nm:'You',msg:'TATAMOTORS bhi dekho â€” JLR record quarter! ğŸ”¥',t:'2:46',me:true},
  {nm:'SmartMoney_09',msg:'Gold $2028 â€” safe haven buying geopolitical tension',t:'2:47',me:false},
];
const AUTO_MSGS=['Nifty 22400 cross karega this week ğŸ’ª','RELIANCE mein fresh buying ho rahi hai ğŸ“ˆ','FII ne â‚¹2,800Cr ki buying ki today â€” positive!','BANKNIFTY 48000 CE pe heavy OI ğŸ‘€','VIX 13.42 â€” low volatility = steady uptrend','US markets green â€” India bhi kal green ğŸŸ¢','Smallcap correction mein accumulate karo','ICICI Q3 result kal â€” strong beat expected!','Gold $2028 â€” geopolitical premium building','Nifty support 22000 strong â€” buy on dips'];
const BOTS=['TradingPro','NiftyKing','OptionsBull','ValueInvest','DayTrader','Bulls_Pro','MarketGuru'];
const THEMES={
  galaxy:{nm:'ğŸŒŒ Galaxy Dark',c:['#000510','#ffd700','#00f5ff']},
  purple:{nm:'ğŸ’œ Purple Storm',c:['#0d0118','#c084fc','#a855f7']},
  ocean:{nm:'ğŸŒŠ Ocean Deep',c:['#000d1a','#00d4ff','#0090ff']},
  matrix:{nm:'ğŸ’š Matrix',c:['#000800','#00ff41','#39ff14']},
  sunrise:{nm:'ğŸŒ… Sunrise Gold',c:['#0f0800','#ffb300','#ff6b00']},
  midnight:{nm:'âš« Midnight',c:['#080808','#ffffff','#e0e0e0']},
};

// STATE
let curS=STOCKS[0],oType='BUY',voiceOn=false,vInt;
let ptBal=100000,ptPos=[],chatArr=[...CHAT_SEED];
let qIdx=0,qSc=0,atType='above',prevScr='home';
const AP='BullsEye@2024',AK='BE-OWNER-001';
const HK='be_v2';
let curTheme=localStorage.getItem('be_theme')||'galaxy';
document.body.setAttribute('data-theme',curTheme);

// STORAGE
function gH(){try{return JSON.parse(localStorage.getItem(HK))||{orders:[],ptO:[],alerts:[]}}catch{return{orders:[],ptO:[],alerts:[]}}}
function sH(h){localStorage.setItem(HK,JSON.stringify(h))}
function aH(t,d){const h=gH();h[t]=h[t]||[];h[t].unshift({...d,ts:new Date().toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit'})});h[t]=h[t].slice(0,80);sH(h)}

// GALAXY
// Galaxy animation disabled for clean dark theme
const gc = {getContext:()=>({clearRect:()=>{},arc:()=>{},fill:()=>{},beginPath:()=>{},stroke:()=>{},moveTo:()=>{},lineTo:()=>{},createLinearGradient:()=>({addColorStop:()=>{}})})};
// Galaxy animation fully disabled

// THEMES
function openThemes(){
  const g=document.getElementById('thg');
  g.innerHTML=Object.entries(THEMES).map(([k,t])=>`<div class="tho ${k===curTheme?'act':''}" onclick="setTheme('${k}')" id="tho-${k}"><div class="thpv" style="background:linear-gradient(135deg,${t.c[0]},${t.c[1]});border:1px solid ${t.c[2]}44;"></div><div class="thnm" style="color:${t.c[1]}">${t.nm}</div><div class="thck">âœ…</div></div>`).join('');
  document.getElementById('thpick').classList.add('on');
}
function setTheme(k){
  curTheme=k;document.body.setAttribute('data-theme',k);localStorage.setItem('be_theme',k);
  document.querySelectorAll('.tho').forEach(el=>el.classList.toggle('act',el.id==='tho-'+k));
  showNotif('ğŸ¨','Theme Changed!',THEMES[k].nm+' apply hua!');
  setTimeout(closeThemes,500);
}
function closeThemes(){document.getElementById('thpick').classList.remove('on');}

// MARKET STRIP
function buildStrip(){
  const all=[...GMARKETS,...COMM.map(c=>({fl:c.ic,sym:c.nm,pr:c.pr,chg:c.chg,up:c.chg>=0}))];
  const h=[...all,...all].map(i=>`<div class="msi"><span class="ms-s">${i.fl||''}${i.sym}</span><span class="ms-p ${i.chg>=0?'up':'dn'}">${i.pr.toLocaleString('en-IN',{maximumFractionDigits:1})}</span><span class="ms-c ${i.chg>=0?'up':'dn'}">${i.chg>=0?'â–²':'â–¼'}${Math.abs(i.chg).toFixed(2)}%</span></div>`).join('');
  document.getElementById('mstrip').innerHTML=`<div class="mst">${h}</div>`;
}
buildStrip();

// SPARKLINE
function sp(up,w=130,h=42){
  let pts=[],y=h*.55;
  for(let x=0;x<=w;x+=w/10){y+=(Math.random()-.47+(up?.05:-.05))*h*.24;y=Math.max(h*.1,Math.min(h*.9,y));pts.push([x,y]);}
  const col=up?'#00e676':'#ff2d55';
  const pD='M'+pts.map(p=>p.join(',')).join(' L');
  const fD=pD+` L${w},${h} L0,${h} Z`;
  const id='spg'+Math.random().toString(36).slice(2,8);
  return `<svg viewBox="0 0 ${w} ${h}" width="100%" height="100%" preserveAspectRatio="none"><defs><linearGradient id="${id}" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="${col}" stop-opacity=".35"/><stop offset="100%" stop-color="${col}" stop-opacity="0"/></linearGradient></defs><path d="${fD}" fill="url(#${id})"/><path d="${pD}" fill="none" stroke="${col}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="${pts[pts.length-1][0]}" cy="${pts[pts.length-1][1]}" r="3.5" fill="${col}"/></svg>`;
}
function miniSp(up){let pts=[],y=13,w=58,h=26;for(let x=0;x<=w;x+=w/7){y+=(Math.random()-.47+(up?.05:-.05))*h*.28;y=Math.max(3,Math.min(h-3,y));pts.push([x,y]);}const col=up?'#00e676':'#ff2d55';return `<svg viewBox="0 0 ${w} ${h}" width="${w}" height="${h}"><polyline points="${pts.map(p=>p.join(',')).join(' ')}" fill="none" stroke="${col}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`;}

// CANDLESTICK CHART
function drawCandles(up){
  const cv=document.getElementById('ccv'),cx=cv.getContext('2d');
  const W=430,H=170;cx.clearRect(0,0,W,H);
  cx.strokeStyle='rgba(255,255,255,.04)';cx.lineWidth=0.5;
  for(let i=0;i<5;i++){cx.beginPath();cx.moveTo(0,10+i*30);cx.lineTo(W,10+i*30);cx.stroke();}
  let price=curS.price;const candles=[];
  for(let i=0;i<42;i++){const o=price,range=price*.008,h=o+Math.random()*range,l=o-Math.random()*range,c=o+(Math.random()-.5+(up?.002:-.002))*range;price=c;candles.push({o,h,l,c,bull:c>=o});}
  const mins=candles.map(c=>c.l),maxs=candles.map(c=>c.h);
  const minP=Math.min(...mins),maxP=Math.max(...maxs),rng=maxP-minP||1;
  const py=p=>10+(maxP-p)/rng*(H-20),cw=8,gap=2;
  candles.forEach((c,i)=>{
    const x=2+i*(cw+gap),col=c.bull?'#00e676':'#ff2d55';
    cx.strokeStyle=col;cx.lineWidth=1;cx.beginPath();cx.moveTo(x+cw/2,py(c.h));cx.lineTo(x+cw/2,py(c.l));cx.stroke();
    cx.fillStyle=col;const top=py(Math.max(c.o,c.c)),bot=py(Math.min(c.o,c.c));cx.fillRect(x,top,cw,Math.max(1,bot-top));
    cx.fillStyle=c.bull?'rgba(0,230,118,.2)':'rgba(255,45,85,.2)';const vol=.3+Math.random()*.7;cx.fillRect(x,H-vol*22,cw,vol*22);
  });
}

// SCREENS
const ALL_SCRS=['home','watchlist','global','fo','more','portfolio','detail','chat','ipo','mf','paper','alert','quiz','admin'];
const NAV=['home','watchlist','global','fo','more'];
function goTo(id){
  prevScr=document.querySelector('.scr.on')?.id?.replace('Screen','')||'home';
  ALL_SCRS.forEach(s=>{const el=document.getElementById(s+'Screen');if(el)el.classList.toggle('on',s===id);});
  const hideNav=['detail','chat','ipo','mf','paper','alert','quiz','admin'].includes(id);
  document.getElementById('mainBnav').style.display=hideNav?'none':'flex';
  document.getElementById('mainTb').style.display=id==='admin'?'none':'flex';
  document.getElementById('mstrip').style.display=id==='admin'?'none':'flex';
  NAV.forEach(s=>document.getElementById('bn-'+s)?.classList.toggle('act',s===id));
  const build={home:buildHome,watchlist:buildWL,global:buildGlobal,fo:buildFO,more:buildMore,portfolio:buildPF,ipo:buildIPO,mf:buildMF,paper:buildPaper,alert:buildAlerts,quiz:buildQuiz,chat:buildChat};
  if(build[id])build[id]();
}
function goBack(){goTo(['detail','ipo','mf','paper','alert','quiz','fo','chat'].includes(prevScr)?prevScr:'watchlist');}

// HOME
function buildHome(){
  document.getElementById('homeC').innerHTML=`
  <div class="hero">
    <div class="hero-gr">NAMASTE, AMIT KUMAR âš¡</div>
    <div class="hero-val">â‚¹5,24,830</div>
    <div class="up" style="font-family:'Share Tech Mono',monospace;font-size:12px;">â–² â‚¹4,284 (+0.82%) today</div>
    <div class="hero-st">
      <div class="hs"><div class="hsl">TODAY P&L</div><div class="hsv up">+â‚¹4,284</div></div>
      <div class="hs"><div class="hsl">INVESTED</div><div class="hsv">â‚¹4.82L</div></div>
      <div class="hs"><div class="hsl">RETURNS</div><div class="hsv up">+8.9%</div></div>
    </div>
  </div>
  <div class="compbanner">
    <div class="cbt">ğŸ† BULLS EYE vs SAHI â€” WHY BULLS EYE WINS</div>
    ${[['AI Signals (BUY/SELL)','âŒ None','âœ… 82% Accuracy'],['Global Markets','âŒ India Only','âœ… 14 Markets'],['Voice Commands','âŒ None','âœ… Hinglish AI'],['6 Background Themes','âŒ 1 Theme','âœ… 6 Themes'],['Paper Trading','âŒ None','âœ… â‚¹1L Virtual'],['Live Trader Chat','âŒ None','âœ… 482 Users'],['IPO GMP Data','âŒ Basic','âœ… Real-time GMP'],['F&O Greeks','âŒ Basic','âœ… Full Greeks']].map(r=>`<div class="cbr"><span class="cbf">${r[0]}</span><span class="cbs">${r[1]}</span><span class="cbb">${r[2]}</span></div>`).join('')}
  </div>
  <div class="qag">
    ${[{i:'ğŸš€',l:'IPO',f:"goTo('ipo')"},{i:'ğŸ’°',l:'Funds',f:"goTo('mf')"},{i:'ğŸ®',l:'Paper',f:"goTo('paper')"},{i:'ğŸ’¬',l:'Chat',f:"goTo('chat')"}].map(q=>`<div class="qa" onclick="${q.f}"><div class="qai">${q.i}</div><div class="qal">${q.l}</div></div>`).join('')}
  </div>
  <div class="sech" style="margin-top:10px;"><div class="sect">ğŸ¯ TOP AI PICKS</div><div class="secm" onclick="goTo('watchlist')">SEE ALL</div></div>
  <div class="hscr">
    ${STOCKS.filter(s=>s.sig==='BUY').slice(0,5).map(s=>`<div class="sc" onclick="openD('${s.sym}')" style="background:#161616;border:1px solid #1e1e1e;"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:2px;"><div class="sc-sym" style="color:#ffffff">${s.sym}</div><span class="sc-sig sib">BUY</span></div><div class="sc-nm">${s.sec}</div><div style="height:38px;margin:4px 0;">${sp(true)}</div><div class="sc-pr up">â‚¹${s.price.toLocaleString('en-IN',{maximumFractionDigits:0})}</div><div class="sc-pct up">â–²${s.chg}% Â· Tâ‚:â‚¹${s.t1.toLocaleString()}</div></div>`).join('')}
  </div>
  <div class="sech"><div class="sect">ğŸŒ GLOBAL SNAPSHOT</div><div class="secm" onclick="goTo('global')">MORE</div></div>
  <div class="gmg" style="margin-bottom:12px;">
    ${GMARKETS.slice(0,4).map(m=>`<div class="gmc" onclick="goTo('global')"><div class="gfl">${m.fl}</div><div class="grg">${m.rg}</div><div class="gsm">${m.sym}</div><div class="gpr ${m.up?'up':'dn'}">${m.pr.toLocaleString()}</div><div class="gch ${m.up?'up':'dn'}">${m.up?'â–²':'â–¼'}${Math.abs(m.chg)}%</div></div>`).join('')}
  </div>
  <div class="sech"><div class="sect">âš¡ COMMODITIES</div></div>
  <div class="hscr" style="margin-bottom:12px;">
    ${COMM.map(c=>`<div class="sc" style="flex:0 0 115px;" onclick="showNotif('${c.ic}','${c.nm}','${c.pr} Â· ${c.chg>=0?'â–²':'â–¼'}${Math.abs(c.chg)}%')"><div style="font-size:20px;margin-bottom:5px;">${c.ic}</div><div class="sc-nm">${c.nm}</div><div class="sc-pr ${c.chg>=0?'up':'dn'}">${c.pr.toLocaleString()}</div><div class="sc-pct ${c.chg>=0?'up':'dn'}">${c.chg>=0?'â–²':'â–¼'}${Math.abs(c.chg).toFixed(2)}%</div></div>`).join('')}
  </div>
  <div style="margin:0 16px 20px;padding:14px;background:var(--hg);border:1px solid rgba(255,255,255,.07);border-radius:14px;">
    <div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a2);letter-spacing:1.5px;margin-bottom:8px;">ğŸ¤– AI MARKET PULSE</div>
    <div style="font-size:11px;color:var(--t2);line-height:1.9;">ğŸŸ¢ <b style="color:var(--t1)">Nifty bullish:</b> PCR 1.24 â€” put writers active at 22000.<br>ğŸŒ <b style="color:var(--t1)">Global cues:</b> US green, Gift Nifty +76 pts positive open.<br>ğŸ¥‡ <b style="color:var(--t1)">Gold $2028:</b> Safe haven buying. Watch energy stocks.<br>ğŸ’¡ <b style="color:var(--t1)">Best bets:</b> ICICIBANK, BAJFINANCE dips mein accumulate karo.</div>
  </div>`;
}

// WATCHLIST
let wlTab='mylist', scanTab='shortbuild';

// ğŸ“Š OI SCANNER DATA â€” Updated daily (Demo mode â€” connect Upstox API for live)
const SCANNERS = {
  // Short Covering = OIâ†“ Priceâ†‘ (Shorts exiting â€” Bullish signal)
  shortcover: [
    {sym:'ANGELONE',  nm:'Angel One Ltd',        oi:'-21.38%', oiL:'308.32L', ltp:233.20, chg:+5.40, sec:'Broking',    signal:'ğŸŸ¢ BULLISH'},
    {sym:'LTFH',      nm:'L&T Finance Holdings', oi:'-34.78%', oiL:'669.22L', ltp:283.95, chg:+5.32, sec:'NBFC',       signal:'ğŸŸ¢ BULLISH'},
    {sym:'CAMS',      nm:'Computer Age Mgmt',    oi:'-5.17%',  oiL:'67.89L',  ltp:677.60, chg:+4.37, sec:'Fintech',   signal:'ğŸŸ¢ BULLISH'},
    {sym:'PPLPHARMA', nm:'Piramal Pharma',       oi:'-2.36%',  oiL:'186.64L', ltp:156.13, chg:+3.87, sec:'Pharma',    signal:'ğŸŸ¢ BULLISH'},
    {sym:'GODREJPROP',nm:'Godrej Properties',    oi:'-1.92%',  oiL:'81.32L',  ltp:1731.00,chg:+3.72, sec:'Realty',    signal:'ğŸŸ¢ BULLISH'},
    {sym:'UNOMINDA',  nm:'UNO Minda',            oi:'-2.03%',  oiL:'66.98L',  ltp:1188.50,chg:+3.42, sec:'Auto',      signal:'ğŸŸ¢ BULLISH'},
    {sym:'BSE',       nm:'BSE Ltd',              oi:'-18.53%', oiL:'107.43L', ltp:2707.10,chg:+3.35, sec:'Exchange',  signal:'ğŸŸ¢ BULLISH'},
    {sym:'MANAPPURAM',nm:'Manappuram Finance',   oi:'-4.21%',  oiL:'506.73L', ltp:283.25, chg:+3.18, sec:'NBFC',      signal:'ğŸŸ¢ BULLISH'},
    {sym:'ESCORTS',   nm:'Escorts Kubota',       oi:'-3.87%',  oiL:'42.11L',  ltp:3124.45,chg:+2.94, sec:'Auto',      signal:'ğŸŸ¢ BULLISH'},
    {sym:'ABCAPITAL', nm:'Aditya Birla Capital', oi:'-3.12%',  oiL:'234.56L', ltp:187.30, chg:+2.67, sec:'Finance',   signal:'ğŸŸ¢ BULLISH'},
  ],

  // Short Buildup = OIâ†‘ Priceâ†“ (New shorts adding â€” Bearish signal)
  shortbuild: [
    {sym:'HDFCLIFE',  nm:'HDFC Life Insurance',  oi:'+28.45%', oiL:'412.38L', ltp:624.30, chg:-4.20, sec:'Insurance', signal:'ğŸ”´ BEARISH'},
    {sym:'SBICARD',   nm:'SBI Cards',            oi:'+19.32%', oiL:'287.64L', ltp:712.85, chg:-3.95, sec:'Finance',   signal:'ğŸ”´ BEARISH'},
    {sym:'INDUSTOWER',nm:'Indus Towers',         oi:'+15.67%', oiL:'523.41L', ltp:334.60, chg:-3.75, sec:'Telecom',   signal:'ğŸ”´ BEARISH'},
    {sym:'MUTHOOTFIN',nm:'Muthoot Finance',      oi:'+12.88%', oiL:'178.92L', ltp:1842.45,chg:-3.40, sec:'NBFC',      signal:'ğŸ”´ BEARISH'},
    {sym:'TATAPOWER', nm:'Tata Power',           oi:'+11.23%', oiL:'892.34L', ltp:382.75, chg:-3.15, sec:'Power',     signal:'ğŸ”´ BEARISH'},
    {sym:'ZOMATO',    nm:'Zomato Ltd',           oi:'+9.76%',  oiL:'1243.67L',ltp:198.40, chg:-2.90, sec:'Tech',      signal:'ğŸ”´ BEARISH'},
    {sym:'NAUKRI',    nm:'Info Edge India',      oi:'+8.54%',  oiL:'34.21L',  ltp:6234.50,chg:-2.65, sec:'Tech',      signal:'ğŸ”´ BEARISH'},
    {sym:'DMART',     nm:'Avenue Supermarts',    oi:'+7.32%',  oiL:'98.43L',  ltp:4127.80,chg:-2.40, sec:'Retail',    signal:'ğŸ”´ BEARISH'},
    {sym:'BAJAJFINSV',nm:'Bajaj Finserv',        oi:'+6.87%',  oiL:'267.34L', ltp:1634.25,chg:-2.15, sec:'Finance',   signal:'ğŸ”´ BEARISH'},
    {sym:'PIDILITIND', nm:'Pidilite Industries', oi:'+5.43%',  oiL:'45.67L',  ltp:2834.60,chg:-1.98, sec:'Chemical',  signal:'ğŸ”´ BEARISH'},
  ],

  // Long Buildup = OIâ†‘ Priceâ†‘ (New longs adding â€” Bullish signal)
  longbuild: [
    {sym:'RELIANCE',  nm:'Reliance Industries',  oi:'+18.43%', oiL:'1243.56L',ltp:2847.00,chg:+1.53, sec:'Oil & Gas', signal:'ğŸŸ¢ BULLISH'},
    {sym:'HDFCBANK',  nm:'HDFC Bank Ltd',        oi:'+14.21%', oiL:'2341.23L',ltp:1623.45,chg:+1.38, sec:'Banking',   signal:'ğŸŸ¢ BULLISH'},
    {sym:'ICICIBANK', nm:'ICICI Bank',           oi:'+12.67%', oiL:'3421.87L',ltp:1089.30,chg:+2.11, sec:'Banking',   signal:'ğŸŸ¢ BULLISH'},
    {sym:'TCS',       nm:'TCS Ltd',              oi:'+9.34%',  oiL:'456.78L', ltp:3912.00,chg:+1.24, sec:'IT',        signal:'ğŸŸ¢ BULLISH'},
    {sym:'LT',        nm:'L&T Ltd',              oi:'+8.76%',  oiL:'678.34L', ltp:3487.25,chg:+1.67, sec:'Infra',     signal:'ğŸŸ¢ BULLISH'},
    {sym:'SUNPHARMA', nm:'Sun Pharmaceutical',   oi:'+7.89%',  oiL:'234.56L', ltp:1687.40,chg:+1.43, sec:'Pharma',   signal:'ğŸŸ¢ BULLISH'},
    {sym:'MARUTI',    nm:'Maruti Suzuki',        oi:'+6.54%',  oiL:'123.45L', ltp:12437.50,chg:+0.98,sec:'Auto',      signal:'ğŸŸ¢ BULLISH'},
    {sym:'ASIANPAINT',nm:'Asian Paints',         oi:'+5.43%',  oiL:'167.23L', ltp:2834.60,chg:+0.87, sec:'Paint',     signal:'ğŸŸ¢ BULLISH'},
    {sym:'TITAN',     nm:'Titan Company',        oi:'+4.87%',  oiL:'289.34L', ltp:3267.80,chg:+0.76, sec:'Consumer',  signal:'ğŸŸ¢ BULLISH'},
    {sym:'ULTRACEMCO',nm:'UltraTech Cement',     oi:'+4.12%',  oiL:'87.34L',  ltp:10234.50,chg:+0.65,sec:'Cement',    signal:'ğŸŸ¢ BULLISH'},
  ],

  // Long Unwinding = OIâ†“ Priceâ†“ (Longs exiting â€” Bearish signal)
  longunwind: [
    {sym:'WIPRO',     nm:'Wipro Ltd',            oi:'-8.87%',  oiL:'1234.56L',ltp:498.35, chg:-1.15, sec:'IT',        signal:'ğŸ”´ BEARISH'},
    {sym:'TATASTEEL', nm:'Tata Steel',           oi:'-7.95%',  oiL:'4521.34L',ltp:142.60, chg:-0.98, sec:'Metal',     signal:'ğŸ”´ BEARISH'},
    {sym:'COALINDIA', nm:'Coal India',           oi:'-6.32%',  oiL:'2341.78L',ltp:387.45, chg:-0.87, sec:'Mining',    signal:'ğŸ”´ BEARISH'},
    {sym:'ONGC',      nm:'ONGC Ltd',             oi:'-5.76%',  oiL:'3456.23L',ltp:267.80, chg:-0.74, sec:'Oil & Gas', signal:'ğŸ”´ BEARISH'},
    {sym:'NTPC',      nm:'NTPC Ltd',             oi:'-4.54%',  oiL:'2134.56L',ltp:334.20, chg:-0.65, sec:'Power',     signal:'ğŸ”´ BEARISH'},
    {sym:'POWERGRID', nm:'Power Grid Corp',      oi:'-3.87%',  oiL:'1876.43L',ltp:284.55, chg:-0.52, sec:'Power',     signal:'ğŸ”´ BEARISH'},
    {sym:'SAIL',      nm:'Steel Authority India',oi:'-3.21%',  oiL:'5632.45L',ltp:127.40, chg:-0.43, sec:'Metal',     signal:'ğŸ”´ BEARISH'},
    {sym:'BHEL',      nm:'Bharat Heavy Elec',    oi:'-2.87%',  oiL:'3245.67L',ltp:234.75, chg:-0.38, sec:'Capital',   signal:'ğŸ”´ BEARISH'},
    {sym:'HINDALCO', nm:'Hindalco Industries',   oi:'-2.43%',  oiL:'2134.89L',ltp:578.30, chg:-0.31, sec:'Metal',     signal:'ğŸ”´ BEARISH'},
    {sym:'VEDL',      nm:'Vedanta Ltd',          oi:'-1.98%',  oiL:'4321.56L',ltp:432.65, chg:-0.24, sec:'Mining',    signal:'ğŸ”´ BEARISH'},
  ]
};

function buildWL(){
  document.getElementById('wlC').innerHTML=`
  <div style="background:#0d0d0d;min-height:100vh;">
    <!-- Big Header like Sahi -->
    <div style="font-size:28px;font-weight:700;color:#fff;padding:18px 16px 10px;font-family:'Rajdhani',sans-serif;">My Watchlist</div>
    <!-- Search Bar -->
    <div style="padding:10px 14px 6px;">
      <div style="background:#1a1a1a;border-radius:10px;display:flex;align-items:center;gap:8px;padding:10px 14px;">
        <span style="color:#888;font-size:15px;">ğŸ”</span>
        <input type="text" id="wls" placeholder="Search stocks, indices..." oninput="filterWL(this.value)" 
          style="flex:1;background:transparent;border:none;outline:none;color:#fff;font-size:13px;font-family:'Rajdhani',sans-serif;letter-spacing:0.3px;">
      </div>
    </div>

    <!-- Tabs -->
    <div style="display:flex;border-bottom:1px solid #1f1f1f;margin:4px 0 0;">
      <div onclick="setWLTab('mylist')" style="flex:1;text-align:center;padding:12px 4px;font-size:13px;font-family:'Rajdhani',sans-serif;font-weight:600;cursor:pointer;border-bottom:2px solid ${wlTab==='mylist'?'#fff':'transparent'};color:${wlTab==='mylist'?'#fff':'#555'};">My Lists</div>
      <div onclick="setWLTab('scanner')" style="flex:1;text-align:center;padding:12px 4px;font-size:13px;font-family:'Rajdhani',sans-serif;font-weight:600;cursor:pointer;border-bottom:2px solid ${wlTab==='scanner'?'#fff':'transparent'};color:${wlTab==='scanner'?'#fff':'#555'};">
        <span style="color:#e74c3c;margin-right:3px;font-size:9px;">â—</span>Stock Scanners
      </div>
      <div onclick="setWLTab('recent')" style="flex:1;text-align:center;padding:12px 4px;font-size:13px;font-family:'Rajdhani',sans-serif;font-weight:600;cursor:pointer;border-bottom:2px solid ${wlTab==='recent'?'#fff':'transparent'};color:${wlTab==='recent'?'#fff':'#555'};">Recently Viewed</div>
    </div>

    <div id="wlrows">${renderWLContent()}</div>
  </div>`;
}

function setWLTab(t){wlTab=t;buildWL();}
function setScanTab(t){scanTab=t;buildWL();}

function renderWLContent(){
  if(wlTab==='mylist') return renderMyList(STOCKS);
  if(wlTab==='scanner') return renderScanners();
  if(wlTab==='recent') return renderRecent();
  return '';
}

function renderMyList(list){
  return `<div style="margin-top:4px;">${list.map(s=>`
    <div onclick="openD('${s.sym}')" style="display:flex;align-items:center;padding:13px 16px;border-bottom:1px solid #111;cursor:pointer;">
      <div style="width:36px;height:36px;border-radius:8px;background:${s.col}18;color:${s.col};display:flex;align-items:center;justify-content:center;font-family:'Share Tech Mono',monospace;font-size:10px;font-weight:700;margin-right:12px;">${s.sym.slice(0,2)}</div>
      <div style="flex:1;">
        <div style="font-family:'Rajdhani',sans-serif;font-weight:700;font-size:15px;color:#fff;">${s.sym}</div>
        <div style="font-size:10px;color:#555;font-family:'Share Tech Mono',monospace;margin-top:1px;">${s.sec} Â· <span style="color:${s.sig==='BUY'?'#00e676':s.sig==='SELL'?'#e74c3c':'#f1c40f'}">${s.sig}</span></div>
      </div>
      <div style="margin:0 10px;">${miniSp(s.chg>=0)}</div>
      <div style="text-align:right;">
        <div style="font-family:'Share Tech Mono',monospace;font-size:14px;font-weight:700;color:${s.chg>=0?'#00e676':'#e74c3c'};">â‚¹${s.price.toLocaleString('en-IN',{maximumFractionDigits:0})}</div>
        <div style="font-size:11px;color:${s.chg>=0?'#00e676':'#e74c3c'};margin-top:1px;">${s.chg>=0?'â–²':'â–¼'}${Math.abs(s.chg).toFixed(2)}%</div>
      </div>
    </div>`).join('')}</div>`;
}

function renderScanners(){
  const tabs=[
    {id:'shortcover',label:'Short Covering ğŸŸ¢'},
    {id:'shortbuild', label:'Short Buildup ğŸ”´'},
    {id:'longbuild',  label:'Long Buildup ğŸŸ¢'},
    {id:'longunwind', label:'Long Unwinding ğŸ”´'}
  ];
  const data=SCANNERS[scanTab];
  const isBull = scanTab==='shortcover'||scanTab==='longbuild';
  
  return `
  <!-- Scanner Sub-tabs -->
  <div style="display:flex;overflow-x:auto;padding:10px 14px 0;gap:8px;scrollbar-width:none;">
    ${tabs.map(t=>`<div onclick="setScanTab('${t.id}')" style="white-space:nowrap;padding:7px 16px;border-radius:20px;font-size:13px;font-family:'Rajdhani',sans-serif;font-weight:600;cursor:pointer;background:${scanTab===t.id?'#ffffff':'transparent'};color:${scanTab===t.id?'#000':'#666'};border:1px solid ${scanTab===t.id?'#ffffff':'#2a2a2a'};">${t.label}</div>`).join('')}
  </div>
  
  <!-- Index Filter -->
  <div style="display:flex;align-items:center;justify-content:space-between;padding:10px 16px 6px;">
    <span style="font-size:11px;color:#555;font-family:'Share Tech Mono',monospace;">Index</span>
    <div style="display:flex;align-items:center;gap:6px;background:#1a1a1a;padding:5px 12px;border-radius:20px;">
      <span style="font-size:11px;color:#fff;font-family:'Rajdhani',sans-serif;font-weight:600;">NIFTY 500</span>
      <span style="color:#777;font-size:10px;">â–¼</span>
    </div>
  </div>

  <!-- Column Headers -->
  <div style="display:flex;padding:6px 16px;background:#111;">
    <div style="flex:1;font-size:10px;color:#555;font-family:'Share Tech Mono',monospace;">STOCKS</div>
    <div style="width:110px;text-align:right;font-size:10px;color:#555;font-family:'Share Tech Mono',monospace;">TOTAL OI (L)</div>
    <div style="width:100px;text-align:right;font-size:10px;color:#555;font-family:'Share Tech Mono',monospace;">LTP (CHG%)</div>
  </div>

  <!-- Scanner Rows -->
  ${data.map(s=>`
    <div style="display:flex;align-items:center;padding:13px 16px;border-bottom:1px solid #111;cursor:pointer;">
      <div style="flex:1;">
        <div style="font-family:'Rajdhani',sans-serif;font-weight:700;font-size:17px;color:#fff;">${s.nm}</div>
        <div style="font-size:12px;font-family:'Rajdhani',sans-serif;color:#555;margin-top:2px;">NSE</div>
      </div>
      <div style="width:110px;text-align:right;">
        <div style="font-family:'Rajdhani',sans-serif;font-size:15px;font-weight:600;color:${isBull?'#25c866':'#e74c3c'};">${s.oiL}</div>
        <div style="font-size:12px;color:${isBull?'#25c866':'#e74c3c'};margin-top:1px;">(${s.oi})</div>
      </div>
      <div style="width:100px;text-align:right;">
        <div style="font-family:'Rajdhani',sans-serif;font-size:17px;font-weight:700;color:#fff;">${s.ltp.toFixed(2)}</div>
        <div style="font-size:13px;color:${s.chg>=0?'#25c866':'#e74c3c'};margin-top:1px;">${s.chg>=0?'+':''}${s.chg.toFixed(2)}(${Math.abs(s.chg).toFixed(2)}%)</div>
      </div>
    </div>`).join('')}
  <div style="height:20px;"></div>`;
}

function renderRecent(){
  const recent=STOCKS.slice(0,5);
  return `<div style="padding:10px 16px 6px;font-size:11px;color:#555;font-family:'Share Tech Mono',monospace;">RECENTLY VIEWED</div>${renderMyList(recent)}`;
}

function filterWL(v){
  if(wlTab==='mylist'){
    document.getElementById('wlrows').innerHTML=renderMyList(STOCKS.filter(s=>s.sym.includes(v.toUpperCase())||s.nm.toLowerCase().includes(v.toLowerCase())));
  }
}

// GLOBAL
function buildGlobal(){
  const regs={USA:GMARKETS.filter(m=>m.rg==='USA'),Europe:GMARKETS.filter(m=>m.rg==='Europe'),Asia:GMARKETS.filter(m=>m.rg==='Asia'),India:GMARKETS.filter(m=>m.rg==='India')};
  let h='';Object.entries(regs).forEach(([r,ms])=>{h+=`<div class="sech"><div class="sect">${r==='USA'?'ğŸ‡ºğŸ‡¸':r==='Europe'?'ğŸ‡ªğŸ‡º':r==='Asia'?'ğŸŒ':'ğŸ‡®ğŸ‡³'} ${r.toUpperCase()}</div></div><div class="gmg" style="margin-bottom:12px;">${ms.map(m=>`<div class="gmc"><div class="gfl">${m.fl}</div><div class="grg">${m.rg}</div><div class="gsm">${m.sym}</div><div class="gpr ${m.up?'up':'dn'}">${m.pr.toLocaleString()}</div><div class="gch ${m.up?'up':'dn'}">${m.up?'â–²':'â–¼'}${Math.abs(m.chg)}%</div></div>`).join('')}</div>`;});
  h+=`<div class="sech"><div class="sect">ğŸ­ COMMODITIES</div></div><div class="gmg" style="margin-bottom:14px;">${COMM.map(c=>`<div class="gmc"><div style="font-size:18px;margin-bottom:3px;">${c.ic}</div><div class="gsm">${c.nm}</div><div class="gpr ${c.chg>=0?'up':'dn'}">${c.pr.toLocaleString()}</div><div class="gch ${c.chg>=0?'up':'dn'}">${c.chg>=0?'â–²':'â–¼'}${Math.abs(c.chg).toFixed(2)}%</div></div>`).join('')}</div>`;
  document.getElementById('globalC').innerHTML=h;
}

// F&O
function buildFO(){
  const strikes=[22600,22500,22400,22300,22200,22100,22000,21900,21800];
  document.getElementById('foC').innerHTML=`
    <div style="padding:12px 16px 0;"><div class="sect" style="-webkit-text-fill-color:unset;color:var(--a2);">ğŸ“Š F&O CENTER</div><div style="font-size:9px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-top:2px;">NIFTY Â· BANKNIFTY Â· FINNIFTY Â· GIFTNIFTY</div></div>
    <div class="fog" style="margin-top:12px;">
      <div class="foc"><div class="fol">NIFTY 22200 CE</div><div class="fov up">â‚¹124.50</div><div class="fos up">â–²18.4 (17.3%)</div></div>
      <div class="foc"><div class="fol">NIFTY 22000 PE</div><div class="fov dn">â‚¹68.20</div><div class="fos dn">â–¼14.3 (17.3%)</div></div>
      <div class="foc"><div class="fol">PCR NIFTY</div><div class="fov" style="color:var(--a1);">1.24</div><div class="fos up">ğŸŸ¢ Bullish</div></div>
      <div class="foc"><div class="fol">MAX PAIN</div><div class="fov" style="color:var(--a2);">22,100</div><div class="fos">ATM -100</div></div>
      <div class="foc"><div class="fol">GIFT NIFTY</div><div class="fov up">22,195</div><div class="fos up">â–²76 pts</div></div>
      <div class="foc"><div class="fol">INDIA VIX</div><div class="fov dn">13.42</div><div class="fos dn">â–¼5.96% Low</div></div>
    </div>
    <div style="padding:0 16px 8px;font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a2);letter-spacing:1.5px;">OPTIONS GREEKS â€” NIFTY 22200 CE</div>
    <div class="gkg">
      <div class="gk"><div class="gksm" style="color:var(--a2)">Î”</div><div class="gkn">DELTA</div><div class="gkv up">+0.58</div></div>
      <div class="gk"><div class="gksm" style="color:var(--a1)">Î“</div><div class="gkn">GAMMA</div><div class="gkv" style="color:var(--a1)">0.003</div></div>
      <div class="gk"><div class="gksm" style="color:var(--rd)">Î˜</div><div class="gkn">THETA</div><div class="gkv dn">-2.84</div></div>
      <div class="gk"><div class="gksm" style="color:var(--a3)">V</div><div class="gkn">VEGA</div><div class="gkv" style="color:var(--a3)">8.42</div></div>
      <div class="gk"><div class="gksm" style="color:var(--gr)">Ï</div><div class="gkn">RHO</div><div class="gkv" style="color:var(--gr)">4.18</div></div>
    </div>
    <div style="padding:0 16px 8px;font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a2);letter-spacing:1.5px;">LIVE OPTION CHAIN</div>
    <div class="ocw">
      <table class="oct"><thead><tr><th class="up">OI(CE)</th><th class="up">IV%</th><th class="up">CE LTP</th><th style="color:var(--a2)">STRIKE</th><th class="dn">PE LTP</th><th class="dn">IV%</th><th class="dn">OI(PE)</th></tr></thead>
      <tbody>${strikes.map(s=>{const atm=s===22200;const ce=Math.max(5,(180-(s-22200)*.5)).toFixed(1);const pe=Math.max(5,(180+(s-22200)*.5)).toFixed(1);return `<tr class="${atm?'atm':''}"><td class="up">${Math.round(20+Math.random()*60)}L</td><td>${(11+Math.random()*4).toFixed(1)}%</td><td class="up">â‚¹${ce}</td><td style="font-weight:700;font-family:'Orbitron',sans-serif;font-size:9px;color:${atm?'var(--a2)':'var(--t1)'}">${s}</td><td class="dn">â‚¹${pe}</td><td>${(12+Math.random()*4).toFixed(1)}%</td><td class="dn">${Math.round(15+Math.random()*65)}L</td></tr>`;}).join('')}</tbody>
      </table>
    </div>
    <div style="height:20px;"></div>`;
}

// MORE
function buildMore(){
  document.getElementById('moreC').innerHTML=`
    <div style="padding:12px 16px 8px;" class="sect">âš¡ MORE FEATURES</div>
    <div class="mrg">
      ${[{i:'ğŸš€',n:'IPO Center',s:'GMP + Grey market data',f:"goTo('ipo')"},{i:'ğŸ’°',n:'Mutual Funds',s:'SIP Calc + Top funds',f:"goTo('mf')"},{i:'ğŸ®',n:'Paper Trading',s:'â‚¹1L virtual practice',f:"goTo('paper')"},{i:'ğŸ’¬',n:'Live Chat',s:'482 traders online',f:"goTo('chat')"},{i:'âš¡',n:'Price Alerts',s:'Set target â€” auto notify',f:"goTo('alert')"},{i:'ğŸ§ ',n:'Quiz & Learn',s:'Market knowledge test',f:"goTo('quiz')"},{i:'ğŸ¨',n:'6 Themes',s:'Galaxy, Purple, Ocean...',f:'openThemes()'},{i:'ğŸ“Š',n:'F&O Center',s:'Greeks + Option Chain',f:"goTo('fo')"}].map(x=>`<div class="mrc" onclick="${x.f}"><div class="mri">${x.i}</div><div class="mrn">${x.n}</div><div class="mrs">${x.s}</div></div>`).join('')}
    </div>`;
}

// PORTFOLIO
function buildPF(){
  const holds=[{sym:'RELIANCE',qty:50,avg:2680,ltp:2847,col:'#00f5ff'},{sym:'TCS',qty:20,avg:3820,ltp:3912,col:'#00e676'},{sym:'ICICIBANK',qty:100,avg:980,ltp:1089,col:'#ff2d55'},{sym:'BAJFINANCE',qty:15,avg:6800,ltp:7234,col:'#ff6b35'},{sym:'INFOSYS',qty:40,avg:1700,ltp:1782,col:'#9b59ff'}];
  const ti=holds.reduce((a,h)=>a+h.qty*h.avg,0),tc=holds.reduce((a,h)=>a+h.qty*h.ltp,0),tp=tc-ti,tpp=tp/ti*100;
  document.getElementById('pfC').innerHTML=`
    <div class="pfh">
      <div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:1.5px;margin-bottom:4px;">TOTAL PORTFOLIO VALUE</div>
      <div class="pfv">â‚¹${tc.toLocaleString('en-IN',{maximumFractionDigits:0})}</div>
      <div class="up" style="font-family:'Share Tech Mono',monospace;font-size:12px;margin-top:3px;">â–² â‚¹${tp.toLocaleString('en-IN',{maximumFractionDigits:0})} (+${tpp.toFixed(2)}%)</div>
      <div style="height:4px;background:rgba(255,255,255,.05);border-radius:2px;margin-top:10px;overflow:hidden;"><div style="width:${Math.min(100,tpp*5)}%;height:100%;background:linear-gradient(90deg,var(--gr),var(--a2));border-radius:2px;"></div></div>
      <div style="display:flex;justify-content:space-between;font-size:10px;color:var(--t2);margin-top:8px;font-family:'Share Tech Mono',monospace;"><span>Today: <span class="up">+â‚¹4,284</span></span><span>XIRR: <span class="up">28.4%</span></span></div>
    </div>
    <div style="padding:0 16px 8px;font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a2);letter-spacing:1.5px;">HOLDINGS</div>
    ${holds.map(h=>{const pnl=(h.ltp-h.avg)*h.qty,pp=(h.ltp-h.avg)/h.avg*100,pos=pnl>=0;
      return `<div class="hold" onclick="openD('${h.sym}')"><div style="display:flex;justify-content:space-between;margin-bottom:6px;"><div style="display:flex;align-items:center;gap:8px;"><div style="width:32px;height:32px;border-radius:8px;background:${h.col}18;color:${h.col};display:flex;align-items:center;justify-content:center;font-family:'Share Tech Mono',monospace;font-size:9px;font-weight:700;">${h.sym.slice(0,2)}</div><div><div style="font-family:'Orbitron',sans-serif;font-size:12px;font-weight:700;">${h.sym}</div><div style="font-size:9px;color:var(--t3);font-family:'Share Tech Mono',monospace;">${h.qty} qty Â· Avg â‚¹${h.avg.toLocaleString()}</div></div></div><div class="${pos?'up':'dn'}" style="font-family:'Share Tech Mono',monospace;font-size:13px;font-weight:700;">${pos?'+':''}â‚¹${Math.abs(pnl).toLocaleString('en-IN',{maximumFractionDigits:0})}</div></div><div style="display:flex;justify-content:space-between;font-size:10px;color:var(--t2);font-family:'Share Tech Mono',monospace;"><span>LTP: <b style="color:var(--t1)">â‚¹${h.ltp.toLocaleString()}</b></span><span class="${pos?'up':'dn'}">${pos?'+':''}${pp.toFixed(2)}%</span></div><div class="holdbar"><div class="holdbf" style="width:${Math.min(100,Math.abs(pp)*8)}%;background:${pos?'var(--gr)':'var(--rd)'}"></div></div></div>`;
    }).join('')}
    <div style="height:20px;"></div>`;
}

// DETAIL
function openD(sym){curS=STOCKS.find(s=>s.sym===sym)||STOCKS[0];buildDetail();goTo('detail');}
function buildDetail(){
  const s=curS,sc=s.sig==='BUY'?'var(--gr)':s.sig==='SELL'?'var(--rd)':'#ffd700';
  document.getElementById('dhdr').innerHTML=`
    <div class="dnav"><div class="bk" onclick="goTo('watchlist')">â†</div>
      <div style="flex:1;"><div style="display:flex;align-items:center;gap:6px;"><div class="dsym">${s.sym}</div><span class="dex">NSE</span><span style="padding:2px 7px;border-radius:4px;font-size:8px;font-weight:700;font-family:'Share Tech Mono',monospace;color:${sc};background:rgba(255,255,255,.05);">${s.sig}</span></div>
      <div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-top:1px;">${s.nm}</div></div>
    </div>
    <div class="dpr">â‚¹${s.price.toLocaleString('en-IN',{maximumFractionDigits:2})}</div>
    <div class="dch ${s.chg>=0?'up':'dn'}">${s.chg>=0?'â–²':'â–¼'} ${(s.price*Math.abs(s.chg)/100).toFixed(2)} (${Math.abs(s.chg).toFixed(2)}%)</div>
    <div class="dst">
      <div><div class="dsl">OPEN</div><div class="dsv">${(s.price*.995).toFixed(0)}</div></div>
      <div><div class="dsl">HIGH</div><div class="dsv up">${(s.price*1.005).toFixed(0)}</div></div>
      <div><div class="dsl">LOW</div><div class="dsv dn">${(s.price*.992).toFixed(0)}</div></div>
      <div><div class="dsl">52W H</div><div class="dsv up">${(s.price*1.13).toFixed(0)}</div></div>
      <div><div class="dsl">52W L</div><div class="dsv dn">${(s.price*.78).toFixed(0)}</div></div>
      <div><div class="dsl">VOL</div><div class="dsv">${(Math.random()*2+.5).toFixed(1)}Cr</div></div>
    </div>
    <div class="dbtns"><button class="buybtn" onclick="openOrder(curS,'BUY')">âš¡ BUY</button><button class="sllbtn" onclick="openOrder(curS,'SELL')">ğŸ“‰ SELL</button></div>`;
  drawCandles(s.chg>=0);
  const nH=s.news.map(n=>{const ec=n.eff==='BULLISH'?'eb':n.eff==='BEARISH'?'es':'en',bc=n.eff==='BULLISH'?'var(--gr)':n.eff==='BEARISH'?'var(--rd)':'#ffd700';
    return `<div class="nc"><div class="nct"><span class="ncs">ğŸ“° ${n.src}</span><span class="nctm">ğŸ• ${n.t} ago</span></div><div class="nch">${n.h}</div><div class="ncr"><span class="ntg ${ec}">${n.eff==='BULLISH'?'â†‘ BULLISH':n.eff==='BEARISH'?'â†“ BEARISH':'â†’ NEUTRAL'}</span><div class="nbar"><div class="nbf" style="width:${n.imp}%;background:${bc}"></div></div><span style="font-family:'Share Tech Mono',monospace;font-size:9px;color:${bc}">${n.imp}%</span></div><div class="ncd">${n.det}</div></div>`;}).join('');
  document.getElementById('detailC').innerHTML=`
    <div class="aic">
      <div class="ail">ğŸ¤– BULLS EYE AI SIGNAL</div>
      <div class="aibg ${s.sig==='BUY'?'sgb':s.sig==='SELL'?'sgs':'sgh'}">âš¡ ${s.sig} SIGNAL</div>
      <div class="aitg"><div class="ait"><div class="atl">TARGET 1</div><div class="atv" style="color:${sc}">â‚¹${s.t1.toLocaleString()}</div></div><div class="ait"><div class="atl">TARGET 2</div><div class="atv" style="color:${sc}">â‚¹${s.t2.toLocaleString()}</div></div><div class="ait"><div class="atl">STOP LOSS</div><div class="atv dn">â‚¹${s.sl.toLocaleString()}</div></div></div>
      <div class="confr"><span style="font-size:7px;font-family:'Share Tech Mono',monospace;color:var(--t3);">CONFIDENCE</span><div class="cbar"><div class="cfil" style="width:${s.conf}%"></div></div><span style="font-family:'Share Tech Mono',monospace;font-size:11px;font-weight:700;color:var(--a1);">${s.conf}%</span><span style="font-size:9px;font-family:'Share Tech Mono',monospace;color:var(--t2);">${s.tf}</span></div>
      <div class="air">ğŸ¯ ${s.why}</div>
    </div>
    <div style="padding:0 16px 8px;font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a2);letter-spacing:1.5px;">NEWS & AI IMPACT</div>
    ${nH}
    <div style="margin:0 16px 20px;padding:10px;background:rgba(124,58,237,.06);border:1px solid rgba(124,58,237,.15);border-radius:10px;font-size:9px;color:var(--t2);font-family:'Share Tech Mono',monospace;line-height:1.6;">âš ï¸ Educational only. SEBI registered advisor se salah lein.</div>`;
}
function tfTab(el,tf){document.querySelectorAll('.tf').forEach(b=>b.classList.remove('a'));el.classList.add('a');drawCandles(curS.chg>=0);}

// IPO
function buildIPO(){
  document.getElementById('ipoC').innerHTML=`
    <div style="display:flex;align-items:center;gap:8px;padding:12px 16px 8px;"><div class="bk" onclick="goTo('more')">â†</div><div class="sect" style="-webkit-text-fill-color:unset;color:var(--a1);">ğŸš€ IPO CENTER</div></div>
    ${IPOS.map(ipo=>`<div class="ipoc"><div class="ipot"><div><div class="ipon">${ipo.nm}</div><div class="ipos">${ipo.sec}</div></div><span class="iposs ${ipo.st==='open'?'sto':ipo.st==='upcoming'?'stu':'stl'}">${ipo.st==='open'?'ğŸŸ¢ OPEN':ipo.st==='upcoming'?'â³ UPCOMING':'âœ… LISTED'}</span></div><div class="ipog"><div class="igi"><div class="igl">PRICE BAND</div><div class="igv">â‚¹${ipo.band}</div></div><div class="igi"><div class="igl">ISSUE SIZE</div><div class="igv">${ipo.sz}</div></div><div class="igi"><div class="igl">SUBSCRIPTION</div><div class="igv ${ipo.sub!=='â€”'?'up':''}">${ipo.sub}</div></div><div class="igi"><div class="igl">OPEN</div><div class="igv">${ipo.open}</div></div><div class="igi"><div class="igl">CLOSE</div><div class="igv">${ipo.close}</div></div><div class="igi"><div class="igl">LOT SIZE</div><div class="igv">${ipo.lot}</div></div></div><div class="gmp"><div><div class="gmpl">GMP â€” Grey Market Premium</div><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);">Unofficial listing estimate</div></div><div class="gmpv">+â‚¹${ipo.gmp}</div><div class="gmpp">(+${ipo.gpct}%)</div></div><button class="ipoapply" onclick="showNotif('ğŸš€','${ipo.nm}','GMP: +${ipo.gpct}% Â· Est. listing â‚¹${(ipo.pr+ipo.gmp).toFixed(0)} Â· Apply via broker app')">${ipo.st==='open'?'âš¡ APPLY NOW':ipo.st==='upcoming'?'ğŸ”” SET REMINDER':'ğŸ“Š VIEW ALLOTMENT'}</button></div>`).join('')}
    <div style="height:20px;"></div>`;
}

// MUTUAL FUNDS
function buildMF(){
  document.getElementById('mfC').innerHTML=`
    <div style="display:flex;align-items:center;gap:8px;padding:12px 16px 8px;"><div class="bk" onclick="goTo('more')">â†</div><div class="sect" style="-webkit-text-fill-color:unset;color:var(--a1);">ğŸ’° MUTUAL FUNDS</div></div>
    <div class="sipc"><div class="sipt">ğŸ§® SIP CALCULATOR</div>
      <div class="sipf"><div class="sipl"><span>Monthly SIP</span><span id="sla">â‚¹5,000</span></div><input type="range" min="500" max="100000" step="500" value="5000" id="sra" oninput="calcSIP()"></div>
      <div class="sipf"><div class="sipl"><span>Expected Returns</span><span id="slb">12%</span></div><input type="range" min="6" max="30" step="1" value="12" id="srb" oninput="calcSIP()"></div>
      <div class="sipf"><div class="sipl"><span>Time Period</span><span id="slc">10 years</span></div><input type="range" min="1" max="30" step="1" value="10" id="src" oninput="calcSIP()"></div>
      <div class="sipres" id="sipres"></div>
    </div>
    <div style="padding:0 16px 8px;font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a2);letter-spacing:1.5px;">TOP PERFORMING FUNDS</div>
    ${MFS.map(f=>`<div class="mfc" onclick="showNotif('ğŸ’°','${f.nm}','1Y: +${f.r1}% Â· 3Y: +${f.r3}% Â· 5Y: +${f.r5}% | AUM ${f.aum}')"><div style="display:flex;justify-content:space-between;align-items:flex-start;"><div><div class="mfn">${f.nm}</div><div class="mfcat">${f.cat}</div></div><div style="text-align:right;"><div class="mfrv">+${f.r1}%</div><div class="mfrl">1Y Returns</div></div></div><div class="mfbar"><div class="mfbf" style="width:${Math.min(100,f.r1*1.5)}%"></div></div><div style="display:flex;justify-content:space-between;font-size:10px;color:var(--t2);font-family:'Share Tech Mono',monospace;"><span>AUM: ${f.aum}</span><span>Min: â‚¹${f.min}</span><span style="color:${f.risk==='Low'?'var(--gr)':f.risk.includes('High')?'var(--rd)':'#ffd700'}">Risk: ${f.risk}</span></div></div>`).join('')}
    <div style="height:20px;"></div>`;
  calcSIP();
}
function calcSIP(){
  const p=+document.getElementById('sra').value,r=+document.getElementById('srb').value/100/12,n=+document.getElementById('src').value*12;
  document.getElementById('sla').textContent='â‚¹'+p.toLocaleString('en-IN');
  document.getElementById('slb').textContent=document.getElementById('srb').value+'%';
  document.getElementById('slc').textContent=document.getElementById('src').value+' years';
  const inv=p*n,fv=p*(((Math.pow(1+r,n)-1)/r)*(1+r)),gain=fv-inv;
  document.getElementById('sipres').innerHTML=`<div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a2);letter-spacing:1.5px;margin-bottom:10px;">ğŸ“Š PROJECTION</div><div class="srg"><div class="sri"><div class="srl">INVESTED</div><div class="srv" style="color:var(--t2);">â‚¹${(inv/100000).toFixed(2)}L</div></div><div class="sri"><div class="srl">EST. GAINS</div><div class="srv up">â‚¹${(gain/100000).toFixed(2)}L</div></div><div class="sri"><div class="srl">TOTAL VALUE</div><div class="srv" style="color:var(--a1);">â‚¹${(fv/100000).toFixed(2)}L</div></div><div class="sri"><div class="srl">WEALTH GAIN</div><div class="srv up">+${((gain/inv)*100).toFixed(1)}%</div></div></div>`;
}

// PAPER TRADING
function buildPaper(){
  const curPnl=ptPos.reduce((a,p)=>{const s=STOCKS.find(x=>x.sym===p.sym);return a+(s?s.price-p.avg:0)*p.qty;},0);
  const h=gH();
  document.getElementById('paperC').innerHTML=`
    <div style="display:flex;align-items:center;gap:8px;padding:12px 16px 8px;"><div class="bk" onclick="goTo('more')">â†</div><div class="sect" style="-webkit-text-fill-color:unset;color:var(--a3);">ğŸ® PAPER TRADING</div></div>
    <div class="pth"><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);letter-spacing:1.5px;margin-bottom:4px;">VIRTUAL BALANCE</div>
      <div class="ptbal">â‚¹${ptBal.toLocaleString('en-IN')}</div>
      <div class="${curPnl>=0?'up':'dn'}" style="font-family:'Share Tech Mono',monospace;font-size:12px;margin-top:4px;">Unrealized: ${curPnl>=0?'+':''}â‚¹${Math.abs(curPnl).toFixed(0)}</div>
      <div style="font-size:10px;color:var(--t2);margin-top:6px;">No real money risk â€” practice freely!</div>
    </div>
    <div class="ptf"><div style="font-family:'Orbitron',sans-serif;font-size:11px;font-weight:700;color:var(--a2);margin-bottom:12px;">âš¡ PLACE PAPER ORDER</div>
      <div class="ptg"><div><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:4px;">STOCK</div><select class="pti" id="ptsy" onchange="updatePTP()">${STOCKS.map(s=>`<option value="${s.sym}" data-p="${s.price.toFixed(2)}">${s.sym} â‚¹${s.price.toFixed(0)}</option>`).join('')}</select></div>
      <div><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:4px;">PRICE</div><input class="pti" type="number" id="ptpr" value="${STOCKS[0].price.toFixed(2)}" oninput="calcPT()"></div>
      <div><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:4px;">QUANTITY</div><input class="pti" type="number" id="ptqt" value="10" oninput="calcPT()"></div>
      <div><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:4px;">TOTAL</div><input class="pti" type="text" id="ptto" value="" readonly style="color:var(--a1)"></div></div>
      <div style="display:flex;gap:8px;"><button class="ptb ptbb" onclick="ptOrder('BUY')">âš¡ PAPER BUY</button><button class="ptb ptbs" onclick="ptOrder('SELL')">ğŸ“‰ PAPER SELL</button></div>
    </div>
    <div style="padding:0 16px 8px;font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a3);letter-spacing:1.5px;">OPEN POSITIONS</div>
    ${ptPos.length?ptPos.map(p=>{const s=STOCKS.find(x=>x.sym===p.sym);const pnl=(s?s.price-p.avg:0)*p.qty;const pos=pnl>=0;
      return `<div class="ptpos"><div style="display:flex;justify-content:space-between;margin-bottom:5px;"><div><div style="font-family:'Orbitron',sans-serif;font-size:12px;font-weight:700;">${p.sym}</div><div style="font-size:9px;color:var(--t3);font-family:'Share Tech Mono',monospace;">${p.qty} qty Â· Avg â‚¹${p.avg.toFixed(2)}</div></div><div class="${pos?'up':'dn'}" style="font-family:'Share Tech Mono',monospace;font-size:13px;font-weight:700;">${pos?'+':''}â‚¹${Math.abs(pnl).toFixed(0)}</div></div><div style="display:flex;justify-content:space-between;font-size:10px;color:var(--t2);font-family:'Share Tech Mono',monospace;"><span>LTP: <b style="color:var(--t1)">â‚¹${s?s.price.toFixed(2):'â€”'}</b></span><button onclick="ptSell('${p.sym}')" style="padding:3px 8px;border-radius:5px;border:none;background:rgba(255,45,85,.15);color:var(--rd);font-size:9px;cursor:pointer;">SELL ALL</button></div></div>`;
    }).join(''):`<div style="text-align:center;padding:24px;color:var(--t3);font-family:'Share Tech Mono',monospace;font-size:11px;">ğŸ“­ Koi position nahi<br><br>Upar se order karo â€” practice karo risk-free!</div>`}
    <div style="padding:8px 16px 8px;font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a3);letter-spacing:1.5px;">TRADE LOG</div>
    ${(h.ptO||[]).slice(0,6).map(o=>`<div class="ptlog"><span style="font-family:'Orbitron',sans-serif;font-size:10px;">${o.sym}</span><span class="${o.tp==='BUY'?'up':'dn'}" style="font-family:'Share Tech Mono',monospace;font-size:10px;">${o.tp}</span><span style="font-family:'Share Tech Mono',monospace;font-size:10px;">${o.qty} @ â‚¹${o.pr}</span><span style="font-size:9px;color:var(--t3);">${o.ts}</span></div>`).join('')||`<div style="text-align:center;padding:14px;color:var(--t3);font-family:'Share Tech Mono',monospace;font-size:10px;">Abhi koi trades nahi</div>`}
    <div style="height:20px;"></div>`;
  calcPT();
}
function updatePTP(){const s=document.getElementById('ptsy');document.getElementById('ptpr').value=s.options[s.selectedIndex].dataset.p;calcPT();}
function calcPT(){const q=+document.getElementById('ptqt').value||1,p=+document.getElementById('ptpr').value||0;const el=document.getElementById('ptto');if(el)el.value='â‚¹'+(q*p).toFixed(0);}
function ptOrder(tp){
  const sym=document.getElementById('ptsy').value,price=+document.getElementById('ptpr').value,qty=+document.getElementById('ptqt').value,total=price*qty;
  if(tp==='BUY'){if(total>ptBal){showNotif('âŒ','Balance nahi!',`Need â‚¹${total.toFixed(0)} Â· Have â‚¹${ptBal.toFixed(0)}`);return;}ptBal-=total;const ex=ptPos.find(p=>p.sym===sym);if(ex){ex.avg=(ex.avg*ex.qty+price*qty)/(ex.qty+qty);ex.qty+=qty;}else ptPos.push({sym,qty,avg:price});}
  else{const pos=ptPos.find(p=>p.sym===sym);if(!pos||pos.qty<qty){showNotif('âŒ','Shares nahi!',`${sym}: sirf ${pos?pos.qty:0} shares hain`);return;}ptBal+=total;pos.qty-=qty;if(pos.qty===0)ptPos=ptPos.filter(p=>p.sym!==sym);}
  aH('ptO',{sym,tp,qty,pr:price.toFixed(2)});
  showNotif(tp==='BUY'?'ğŸ®':'ğŸ“‰',`Paper ${tp}!`,`${qty} ${sym} @ â‚¹${price.toFixed(2)} Â· Bal: â‚¹${ptBal.toLocaleString('en-IN',{maximumFractionDigits:0})}`);
  buildPaper();
}
function ptSell(sym){const pos=ptPos.find(p=>p.sym===sym);if(!pos)return;const s=STOCKS.find(x=>x.sym===sym);document.getElementById('ptsy').value=sym;document.getElementById('ptpr').value=s?s.price.toFixed(2):pos.avg;document.getElementById('ptqt').value=pos.qty;ptOrder('SELL');}

// CHAT
function buildChat(){
  document.getElementById('chOL').textContent=`${420+Math.floor(Math.random()*80)} online`;
  renderChat();
  setTimeout(autoChat,4000+Math.random()*5000);
}
function renderChat(){const el=document.getElementById('chatM');el.innerHTML=chatArr.map(m=>`<div class="cmsg ${m.me?'cme':'cthem'}"><div class="cnm">${m.me?'You':m.nm}</div>${m.msg}<div class="ctm">${m.t}</div></div>`).join('');el.scrollTop=el.scrollHeight;}
function sendChat(){const inp=document.getElementById('chInp'),msg=inp.value.trim();if(!msg)return;const t=new Date().toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit'});chatArr.push({nm:'You',msg,t,me:true});inp.value='';renderChat();setTimeout(autoChat,1500+Math.random()*2000);}
function autoChat(){if(!document.getElementById('chatScreen')?.classList.contains('on'))return;const msg=AUTO_MSGS[Math.floor(Math.random()*AUTO_MSGS.length)],nm=BOTS[Math.floor(Math.random()*BOTS.length)]+'_'+Math.floor(Math.random()*999),t=new Date().toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit'});chatArr.push({nm,msg,t,me:false});renderChat();setTimeout(autoChat,9000+Math.random()*12000);}

// PRICE ALERTS
function buildAlerts(){
  const h=gH(),alerts=h.alerts||[];
  document.getElementById('alertC').innerHTML=`
    <div style="display:flex;align-items:center;gap:8px;padding:12px 16px 8px;"><div class="bk" onclick="goTo('more')">â†</div><div class="sect" style="-webkit-text-fill-color:unset;color:var(--a1);">âš¡ PRICE ALERTS</div></div>
    <div class="alf"><div style="font-family:'Orbitron',sans-serif;font-size:11px;font-weight:700;color:var(--a1);margin-bottom:12px;">SET NEW ALERT</div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px;">
        <div><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:4px;">STOCK</div><select class="ali" id="alsy">${STOCKS.map(s=>`<option>${s.sym}</option>`).join('')}</select></div>
        <div><div style="font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:4px;">TARGET PRICE</div><input class="ali" type="number" id="alpr" placeholder="e.g. 2950"></div>
      </div>
      <div style="display:flex;gap:6px;margin-bottom:10px;">
        <button id="alab" onclick="setAT('above',this)" style="flex:1;padding:8px;border-radius:8px;border:1px solid color-mix(in srgb,var(--a1),transparent 55%);background:rgba(255,215,0,.08);color:var(--a1);font-size:11px;cursor:pointer;font-family:'Rajdhani',sans-serif;">ğŸ“ˆ Price ABOVE</button>
        <button id="albb" onclick="setAT('below',this)" style="flex:1;padding:8px;border-radius:8px;border:1px solid var(--cb);background:transparent;color:var(--t2);font-size:11px;cursor:pointer;font-family:'Rajdhani',sans-serif;">ğŸ“‰ Price BELOW</button>
      </div>
      <button onclick="setAlert()" style="width:100%;padding:11px;border:none;border-radius:10px;background:linear-gradient(135deg,var(--a1),rgba(240,184,0,1));color:#000;font-family:'Orbitron',sans-serif;font-size:12px;font-weight:700;cursor:pointer;">âš¡ ALERT SET KARO</button>
    </div>
    <div style="padding:0 16px 8px;font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a1);letter-spacing:1.5px;">ACTIVE ALERTS (${alerts.length})</div>
    ${alerts.length?alerts.map((a,i)=>`<div class="alrow"><div><div style="font-family:'Orbitron',sans-serif;font-size:12px;font-weight:700;">${a.sym}</div><div style="font-size:9px;color:var(--t2);font-family:'Share Tech Mono',monospace;">${a.tp==='above'?'ğŸ“ˆ >':'ğŸ“‰ <'} â‚¹${a.pr} Â· ${a.ts}</div></div><button onclick="delAl(${i})" style="width:28px;height:28px;border-radius:6px;border:1px solid rgba(255,45,85,.3);background:rgba(255,45,85,.1);color:var(--rd);cursor:pointer;font-size:12px;">ğŸ—‘</button></div>`).join(''):`<div style="text-align:center;padding:24px;color:var(--t3);font-family:'Share Tech Mono',monospace;font-size:11px;">ğŸ“­ Koi alert nahi<br>Upar se set karo</div>`}
    <div style="height:20px;"></div>`;
}
function setAT(t,el){atType=t;document.querySelectorAll('#alab,#albb').forEach(b=>{b.style.borderColor=b.id===(t==='above'?'alab':'albb')?'color-mix(in srgb,var(--a1),transparent 55%)':'var(--cb)';b.style.background=b.id===(t==='above'?'alab':'albb')?'rgba(255,215,0,.08)':'transparent';b.style.color=b.id===(t==='above'?'alab':'albb')?'var(--a1)':'var(--t2)';});}
function setAlert(){const sym=document.getElementById('alsy').value,pr=+document.getElementById('alpr').value;if(!pr){showNotif('âŒ','Error','Target price daalo');return;}const h=gH();h.alerts=h.alerts||[];h.alerts.push({sym,pr,tp:atType,ts:new Date().toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit'})});sH(h);showNotif('âš¡','Alert Set!',`${sym} ${atType==='above'?'>':'<'} â‚¹${pr} par notification aayegi`);buildAlerts();}
function delAl(i){const h=gH();h.alerts.splice(i,1);sH(h);buildAlerts();}
setInterval(()=>{const h=gH();(h.alerts||[]).forEach((a,i)=>{const s=STOCKS.find(x=>x.sym===a.sym);if(!s)return;if(a.tp==='above'&&s.price>=a.pr){showNotif('ğŸ””',`${a.sym} ALERT!`,`Price â‚¹${s.price.toFixed(2)} crossed â‚¹${a.pr} target! ğŸ¯`);h.alerts.splice(i,1);sH(h);}else if(a.tp==='below'&&s.price<=a.pr){showNotif('ğŸ””',`${a.sym} ALERT!`,`Price â‚¹${s.price.toFixed(2)} touched â‚¹${a.pr} level`);h.alerts.splice(i,1);sH(h);}});},5500);

// QUIZ
function buildQuiz(){
  qIdx=0;qSc=0;
  document.getElementById('quizC').innerHTML=`
    <div style="display:flex;align-items:center;justify-content:space-between;padding:12px 16px 8px;"><div style="display:flex;align-items:center;gap:8px;"><div class="bk" onclick="goTo('more')">â†</div><div class="sect" style="-webkit-text-fill-color:unset;color:var(--a2);">ğŸ§  MARKET QUIZ</div></div><div style="font-family:'Share Tech Mono',monospace;font-size:12px;font-weight:700;color:var(--a1);">Score: 0</div></div>
    <div id="qarea"></div>
    <div style="padding:0 16px 8px;font-size:8px;font-family:'Share Tech Mono',monospace;color:var(--a2);letter-spacing:1.5px;">ğŸ“š LEARNING TOPICS</div>
    ${LEARN.map(l=>`<div class="learnc" onclick="showNotif('${l.ic}','${l.ti}','${l.de}')"><div style="font-size:22px;margin-bottom:7px;">${l.ic}</div><div style="font-family:'Orbitron',sans-serif;font-size:12px;font-weight:700;margin-bottom:3px;">${l.ti}</div><div style="font-size:10px;color:var(--t2);margin-bottom:6px;">${l.de}</div><span style="padding:2px 8px;border-radius:4px;font-size:8px;font-family:'Share Tech Mono',monospace;font-weight:700;background:${l.lv==='Beginner'?'rgba(0,230,118,.12)':l.lv==='Advanced'?'rgba(255,45,85,.12)':'rgba(255,215,0,.12)'};color:${l.lv==='Beginner'?'#00e676':l.lv==='Advanced'?'#ff2d55':'#ffd700'}">${l.lv}</span></div>`).join('')}
    <div style="height:20px;"></div>`;
  showQ();
}
function showQ(){
  if(qIdx>=QUIZ.length){document.getElementById('qarea').innerHTML=`<div class="quizc" style="text-align:center;"><div style="font-size:36px;margin-bottom:12px;">ğŸ†</div><div style="font-family:'Orbitron',sans-serif;font-size:18px;font-weight:700;color:var(--a1);margin-bottom:8px;">Quiz Complete!</div><div style="font-size:12px;color:var(--t2);font-family:'Share Tech Mono',monospace;">${qSc}/${QUIZ.length*10} points</div><button onclick="qIdx=0;qSc=0;showQ()" style="margin-top:14px;padding:10px 24px;border:none;border-radius:10px;background:linear-gradient(135deg,var(--a1),var(--a2));color:#000;font-family:'Orbitron',sans-serif;font-size:12px;font-weight:700;cursor:pointer;">PLAY AGAIN ğŸ”„</button></div>`;return;}
  const q=QUIZ[qIdx];
  document.getElementById('qarea').innerHTML=`<div class="quizc"><div style="font-size:9px;font-family:'Share Tech Mono',monospace;color:var(--t3);margin-bottom:8px;">Q${qIdx+1}/${QUIZ.length}</div><div class="quizq">${q.q}</div><div class="qopts">${q.opts.map((o,i)=>`<button class="qopt" onclick="ansQ(${i})" id="qo${i}">${String.fromCharCode(65+i)}. ${o}</button>`).join('')}</div><div class="qexp" id="qex">${q.exp}</div></div>`;
}
function ansQ(i){const q=QUIZ[qIdx];document.querySelectorAll('.qopt').forEach((b,j)=>{b.disabled=true;if(j===q.ans)b.classList.add('ok');else if(j===i&&i!==q.ans)b.classList.add('no');});document.getElementById('qex').style.display='block';if(i===q.ans){qSc+=10;showNotif('âœ…','Sahi Jawab!','+10 points! '+q.exp.slice(0,55)+'...');}else{showNotif('âŒ','Galat!','Sahi: '+q.opts[q.ans]);}setTimeout(()=>{qIdx++;showQ();},2200);}

// ORDER
function openOrder(s,type){curS=s;oType=type;document.getElementById('osym').textContent=s.sym;document.getElementById('opr').textContent='â‚¹'+s.price.toLocaleString('en-IN',{maximumFractionDigits:2});document.getElementById('oprice').value=s.price.toFixed(2);setOT(type);document.getElementById('orderOv').classList.add('on');}
function closeOrder(){document.getElementById('orderOv').classList.remove('on');}
function setOT(t){oType=t;document.getElementById('otB').className='ott '+(t==='BUY'?'ba':'');document.getElementById('otS').className='ott '+(t==='SELL'?'sa':'');document.getElementById('osub').className='ossub '+(t==='BUY'?'ossub-b':'ossub-s');document.getElementById('osub').textContent=t==='BUY'?'âš¡ BUY ORDER CONFIRM':'ğŸ“‰ SELL ORDER CONFIRM';calcM();}
function oSeg(el){el.parentElement.querySelectorAll('.ossb').forEach(b=>b.classList.remove('a'));el.classList.add('a');}
function calcM(){const q=+document.getElementById('oqty').value||1,p=+document.getElementById('oprice').value||curS.price;document.getElementById('omgn').textContent='â‚¹'+(q*p*.2).toLocaleString('en-IN',{maximumFractionDigits:0});}
function placeOrder(){const qty=+document.getElementById('oqty').value,pr=+document.getElementById('oprice').value;aH('orders',{sym:curS.sym,tp:oType,qty,pr:pr.toFixed(2)});closeOrder();showNotif(oType==='BUY'?'âœ…':'ğŸ“‰',`${oType} ORDER PLACED!`,`${qty} ${curS.sym} @ â‚¹${pr.toLocaleString()} Â· NSE CONFIRMED`);}

// VOICE
const vws=[1,2,3,4,5].map(i=>document.getElementById('vw'+i));
function toggleVoice(){
  voiceOn=!voiceOn;document.getElementById('vbtn').className='tbb '+(voiceOn?'von':'');document.getElementById('voiceOv').classList.toggle('on',voiceOn);
  if(voiceOn){
    vInt=setInterval(()=>vws.forEach(v=>{if(v)v.style.height=(6+Math.random()*30)+'px';}),110);
    if('webkitSpeechRecognition' in window||'SpeechRecognition' in window){
      const SR=window.SpeechRecognition||window.webkitSpeechRecognition,r=new SR();
      r.lang='hi-IN';r.interimResults=true;
      r.onresult=e=>{const t=e.results[0][0].transcript;document.getElementById('vres').textContent='"'+t+'"';if(e.results[0].isFinal){execV(t.toLowerCase());setTimeout(()=>{if(voiceOn)toggleVoice();},600);}};
      r.onerror=()=>{document.getElementById('vres').textContent='Demo mode â€” chips tap karein ğŸ‘‡';};r.start();
    }else setTimeout(()=>{document.getElementById('vres').textContent='Demo mode â€” chips tap karein ğŸ‘‡';},1200);
  }else{clearInterval(vInt);vws.forEach(v=>{if(v)v.style.height='8px';});}
}
function execV(cmd){
  document.getElementById('vres').textContent='"'+cmd+'"';
  setTimeout(()=>{
    if(/reliance/.test(cmd)){toggleVoice();openD('RELIANCE');}
    else if(/tcs|tata con/.test(cmd)){toggleVoice();openD('TCS');}
    else if(/icici/.test(cmd)){toggleVoice();openD('ICICIBANK');}
    else if(/hdfc/.test(cmd)){toggleVoice();openD('HDFCBANK');}
    else if(/bajaj/.test(cmd)){toggleVoice();openD('BAJFINANCE');}
    else if(/tata motor/.test(cmd)){toggleVoice();openD('TATAMOTORS');}
    else if(/global|world|dow|nasdaq|nikkei|us market/.test(cmd)){toggleVoice();goTo('global');}
    else if(/ipo/.test(cmd)){toggleVoice();goTo('ipo');}
    else if(/mutual|fund|sip/.test(cmd)){toggleVoice();goTo('mf');}
    else if(/paper|virtual|practice/.test(cmd)){toggleVoice();goTo('paper');}
    else if(/chat|baat/.test(cmd)){toggleVoice();goTo('chat');}
    else if(/portfolio|holding|mere/.test(cmd)){toggleVoice();goTo('portfolio');}
    else if(/fo|future|option/.test(cmd)){toggleVoice();goTo('fo');}
    else if(/alert/.test(cmd)){toggleVoice();goTo('alert');}
    else if(/quiz|learn/.test(cmd)){toggleVoice();goTo('quiz');}
    else if(/theme|rang|badlo|color/.test(cmd)){toggleVoice();openThemes();}
    else if(/buy|kharido/.test(cmd)){toggleVoice();openOrder(curS,'BUY');}
    else if(/sell|becho/.test(cmd)){toggleVoice();openOrder(curS,'SELL');}
    else if(/gold|sona/.test(cmd)){toggleVoice();showNotif('ğŸ¥‡','GOLD','â‚¹62,480/10g Â· $2028.40/oz â–²0.32%');}
    else if(/nifty|market|bazaar/.test(cmd)){toggleVoice();showNotif('ğŸ“ˆ','NIFTY 50','22,147 â–²183 pts (0.83%) Â· PCR 1.24 Bullish');}
    else{toggleVoice();showNotif('ğŸ¯','Bulls Eye','Command samjha nahi. Chips try karein!');}
  },600);
}

// NOTIFICATION
function showNotif(ico,title,body){
  document.getElementById('nfico').textContent=ico;document.getElementById('nftit').textContent=title;document.getElementById('nfbod').textContent=body;
  const el=document.getElementById('nfpop');el.classList.add('on');
  if('speechSynthesis' in window){window.speechSynthesis.cancel();const u=new SpeechSynthesisUtterance(title+'. '+body);u.lang='hi-IN';u.rate=.87;u.volume=.8;window.speechSynthesis.speak(u);}
  setTimeout(()=>el.classList.remove('on'),5000);
}

// ADMIN
function doLogin(){
  const p=document.getElementById('apass').value,k=document.getElementById('akey').value;
  if(p===AP&&k===AK){document.getElementById('adminLogin').style.display='none';document.getElementById('adminPanel').style.display='block';}
  else{document.getElementById('aerr').textContent='âŒ Wrong credentials. Try again.';document.getElementById('apass').style.borderColor='var(--rd)';}
}
function sendAdminN(){const t=document.getElementById('ntit').value||'Bulls Eye Alert',b=document.getElementById('nbod').value||'Market update';showNotif('ğŸ“¢',t,b);}
function sendVoiceN(){const t=document.getElementById('vtxt').value;if(!t)return;if('speechSynthesis' in window){window.speechSynthesis.cancel();const u=new SpeechSynthesisUtterance(t);u.lang='hi-IN';u.rate=.85;u.volume=1;window.speechSynthesis.speak(u);}showNotif('ğŸ”Š','Voice Notification',t);}
let maintState=false;
function toggleMaint(){maintState=!maintState;const k=document.getElementById('mknob');k.style.left=maintState?'23px':'3px';document.getElementById('mslide').style.background=maintState?'var(--gr)':'var(--b2)';showNotif(maintState?'ğŸ› ï¸':'âœ…',maintState?'Maintenance ON':'Maintenance OFF',maintState?'App maintenance mode activated':'App is live for all users');}

// LIVE PRICES
setInterval(()=>{
  STOCKS.forEach(s=>{const drift=(Math.random()-.498)*s.price*.0008;s.price=Math.max(s.price*.7,s.price+drift);s.chg=+((s.chg+(Math.random()-.5)*.1)).toFixed(2);});
  GMARKETS.forEach(m=>{m.pr=Math.max(100,m.pr+(Math.random()-.499)*m.pr*.0006);});
},3500);

// INIT

// PWA Service Worker Registration
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./sw.js')
      .then(r => console.log('%cBulls Eye SW registered', 'color:#ffd700'))
      .catch(e => console.log('SW error:', e));
  });
}

console.log('%cBULLS EYE ADMIN','color:#ffd700;font-size:16px;font-weight:bold;');
console.log('%cPassword: BullsEye@2024 | Key: BE-OWNER-001','color:#00f5ff;font-size:12px;');
buildHome();
</script>
</head>
</html>
